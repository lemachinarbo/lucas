(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();var zt=!1,Wt=!1,De=[],Kt=-1;function mi(e){vi(e)}function vi(e){De.includes(e)||De.push(e),bi()}function yi(e){let t=De.indexOf(e);t!==-1&&t>Kt&&De.splice(t,1)}function bi(){!Wt&&!zt&&(zt=!0,queueMicrotask(wi))}function wi(){zt=!1,Wt=!0;for(let e=0;e<De.length;e++)De[e](),Kt=e;De.length=0,Kt=-1,Wt=!1}var ze,je,We,Gr,qt=!0;function _i(e){qt=!1,e(),qt=!0}function xi(e){ze=e.reactive,We=e.release,je=t=>e.effect(t,{scheduler:r=>{qt?mi(r):r()}}),Gr=e.raw}function Or(e){je=e}function Ri(e){let t=()=>{};return[i=>{let o=je(i);return e._x_effects||(e._x_effects=new Set,e._x_runEffects=()=>{e._x_effects.forEach(a=>a())}),e._x_effects.add(o),t=()=>{o!==void 0&&(e._x_effects.delete(o),We(o))},o},()=>{t()}]}function Hr(e,t){let r=!0,i,o=je(()=>{let a=e();JSON.stringify(a),r?i=a:queueMicrotask(()=>{t(a,i),i=a}),r=!1});return()=>We(o)}var Jr=[],Yr=[],Xr=[];function Si(e){Xr.push(e)}function ar(e,t){typeof t=="function"?(e._x_cleanups||(e._x_cleanups=[]),e._x_cleanups.push(t)):(t=e,Yr.push(t))}function Zr(e){Jr.push(e)}function Qr(e,t,r){e._x_attributeCleanups||(e._x_attributeCleanups={}),e._x_attributeCleanups[t]||(e._x_attributeCleanups[t]=[]),e._x_attributeCleanups[t].push(r)}function en(e,t){e._x_attributeCleanups&&Object.entries(e._x_attributeCleanups).forEach(([r,i])=>{(t===void 0||t.includes(r))&&(i.forEach(o=>o()),delete e._x_attributeCleanups[r])})}function Ai(e){var t,r;for((t=e._x_effects)==null||t.forEach(yi);(r=e._x_cleanups)!=null&&r.length;)e._x_cleanups.pop()()}var sr=new MutationObserver(fr),ur=!1;function dr(){sr.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),ur=!0}function tn(){Ci(),sr.disconnect(),ur=!1}var Ye=[];function Ci(){let e=sr.takeRecords();Ye.push(()=>e.length>0&&fr(e));let t=Ye.length;queueMicrotask(()=>{if(Ye.length===t)for(;Ye.length>0;)Ye.shift()()})}function V(e){if(!ur)return e();tn();let t=e();return dr(),t}var cr=!1,bt=[];function Ti(){cr=!0}function Mi(){cr=!1,fr(bt),bt=[]}function fr(e){if(cr){bt=bt.concat(e);return}let t=[],r=new Set,i=new Map,o=new Map;for(let a=0;a<e.length;a++)if(!e[a].target._x_ignoreMutationObserver&&(e[a].type==="childList"&&(e[a].removedNodes.forEach(s=>{s.nodeType===1&&s._x_marker&&r.add(s)}),e[a].addedNodes.forEach(s=>{if(s.nodeType===1){if(r.has(s)){r.delete(s);return}s._x_marker||t.push(s)}})),e[a].type==="attributes")){let s=e[a].target,c=e[a].attributeName,h=e[a].oldValue,w=()=>{i.has(s)||i.set(s,[]),i.get(s).push({name:c,value:s.getAttribute(c)})},R=()=>{o.has(s)||o.set(s,[]),o.get(s).push(c)};s.hasAttribute(c)&&h===null?w():s.hasAttribute(c)?(R(),w()):R()}o.forEach((a,s)=>{en(s,a)}),i.forEach((a,s)=>{Jr.forEach(c=>c(s,a))});for(let a of r)t.some(s=>s.contains(a))||Yr.forEach(s=>s(a));for(let a of t)a.isConnected&&Xr.forEach(s=>s(a));t=null,r=null,i=null,o=null}function rn(e){return it(Ne(e))}function nt(e,t,r){return e._x_dataStack=[t,...Ne(r||e)],()=>{e._x_dataStack=e._x_dataStack.filter(i=>i!==t)}}function Ne(e){return e._x_dataStack?e._x_dataStack:typeof ShadowRoot=="function"&&e instanceof ShadowRoot?Ne(e.host):e.parentNode?Ne(e.parentNode):[]}function it(e){return new Proxy({objects:e},Ei)}var Ei={ownKeys({objects:e}){return Array.from(new Set(e.flatMap(t=>Object.keys(t))))},has({objects:e},t){return t==Symbol.unscopables?!1:e.some(r=>Object.prototype.hasOwnProperty.call(r,t)||Reflect.has(r,t))},get({objects:e},t,r){return t=="toJSON"?Li:Reflect.get(e.find(i=>Reflect.has(i,t))||{},t,r)},set({objects:e},t,r,i){const o=e.find(s=>Object.prototype.hasOwnProperty.call(s,t))||e[e.length-1],a=Object.getOwnPropertyDescriptor(o,t);return a!=null&&a.set&&(a!=null&&a.get)?a.set.call(i,r)||!0:Reflect.set(o,t,r)}};function Li(){return Reflect.ownKeys(this).reduce((t,r)=>(t[r]=Reflect.get(this,r),t),{})}function nn(e){let t=i=>typeof i=="object"&&!Array.isArray(i)&&i!==null,r=(i,o="")=>{Object.entries(Object.getOwnPropertyDescriptors(i)).forEach(([a,{value:s,enumerable:c}])=>{if(c===!1||s===void 0||typeof s=="object"&&s!==null&&s.__v_skip)return;let h=o===""?a:`${o}.${a}`;typeof s=="object"&&s!==null&&s._x_interceptor?i[a]=s.initialize(e,h,a):t(s)&&s!==i&&!(s instanceof Element)&&r(s,h)})};return r(e)}function on(e,t=()=>{}){let r={initialValue:void 0,_x_interceptor:!0,initialize(i,o,a){return e(this.initialValue,()=>ki(i,o),s=>Vt(i,o,s),o,a)}};return t(r),i=>{if(typeof i=="object"&&i!==null&&i._x_interceptor){let o=r.initialize.bind(r);r.initialize=(a,s,c)=>{let h=i.initialize(a,s,c);return r.initialValue=h,o(a,s,c)}}else r.initialValue=i;return r}}function ki(e,t){return t.split(".").reduce((r,i)=>r[i],e)}function Vt(e,t,r){if(typeof t=="string"&&(t=t.split(".")),t.length===1)e[t[0]]=r;else{if(t.length===0)throw error;return e[t[0]]||(e[t[0]]={}),Vt(e[t[0]],t.slice(1),r)}}var an={};function he(e,t){an[e]=t}function Gt(e,t){let r=Oi(t);return Object.entries(an).forEach(([i,o])=>{Object.defineProperty(e,`$${i}`,{get(){return o(t,r)},enumerable:!1})}),e}function Oi(e){let[t,r]=ln(e),i={interceptor:on,...t};return ar(e,r),i}function Di(e,t,r,...i){try{return r(...i)}catch(o){rt(o,e,t)}}function rt(e,t,r=void 0){e=Object.assign(e??{message:"No error message given."},{el:t,expression:r}),console.warn(`Alpine Expression Error: ${e.message}

${r?'Expression: "'+r+`"

`:""}`,t),setTimeout(()=>{throw e},0)}var vt=!0;function sn(e){let t=vt;vt=!1;let r=e();return vt=t,r}function Ie(e,t,r={}){let i;return re(e,t)(o=>i=o,r),i}function re(...e){return un(...e)}var un=dn;function Ii(e){un=e}function dn(e,t){let r={};Gt(r,e);let i=[r,...Ne(e)],o=typeof t=="function"?Pi(i,t):Fi(i,t,e);return Di.bind(null,e,t,o)}function Pi(e,t){return(r=()=>{},{scope:i={},params:o=[]}={})=>{let a=t.apply(it([i,...e]),o);wt(r,a)}}var Pt={};function Bi(e,t){if(Pt[e])return Pt[e];let r=Object.getPrototypeOf(async function(){}).constructor,i=/^[\n\s]*if.*\(.*\)/.test(e.trim())||/^(let|const)\s/.test(e.trim())?`(async()=>{ ${e} })()`:e,a=(()=>{try{let s=new r(["__self","scope"],`with (scope) { __self.result = ${i} }; __self.finished = true; return __self.result;`);return Object.defineProperty(s,"name",{value:`[Alpine] ${e}`}),s}catch(s){return rt(s,t,e),Promise.resolve()}})();return Pt[e]=a,a}function Fi(e,t,r){let i=Bi(t,r);return(o=()=>{},{scope:a={},params:s=[]}={})=>{i.result=void 0,i.finished=!1;let c=it([a,...e]);if(typeof i=="function"){let h=i(i,c).catch(w=>rt(w,r,t));i.finished?(wt(o,i.result,c,s,r),i.result=void 0):h.then(w=>{wt(o,w,c,s,r)}).catch(w=>rt(w,r,t)).finally(()=>i.result=void 0)}}}function wt(e,t,r,i,o){if(vt&&typeof t=="function"){let a=t.apply(r,i);a instanceof Promise?a.then(s=>wt(e,s,r,i)).catch(s=>rt(s,o,t)):e(a)}else typeof t=="object"&&t instanceof Promise?t.then(a=>e(a)):e(t)}var lr="x-";function Ke(e=""){return lr+e}function ji(e){lr=e}var _t={};function H(e,t){return _t[e]=t,{before(r){if(!_t[r]){console.warn(String.raw`Cannot find directive \`${r}\`. \`${e}\` will use the default order of execution`);return}const i=Oe.indexOf(r);Oe.splice(i>=0?i:Oe.indexOf("DEFAULT"),0,e)}}}function Ui(e){return Object.keys(_t).includes(e)}function hr(e,t,r){if(t=Array.from(t),e._x_virtualDirectives){let a=Object.entries(e._x_virtualDirectives).map(([c,h])=>({name:c,value:h})),s=cn(a);a=a.map(c=>s.find(h=>h.name===c.name)?{name:`x-bind:${c.name}`,value:`"${c.value}"`}:c),t=t.concat(a)}let i={};return t.map(gn((a,s)=>i[a]=s)).filter(vn).map(zi(i,r)).sort(Wi).map(a=>$i(e,a))}function cn(e){return Array.from(e).map(gn()).filter(t=>!vn(t))}var Ht=!1,Qe=new Map,fn=Symbol();function Ni(e){Ht=!0;let t=Symbol();fn=t,Qe.set(t,[]);let r=()=>{for(;Qe.get(t).length;)Qe.get(t).shift()();Qe.delete(t)},i=()=>{Ht=!1,r()};e(r),i()}function ln(e){let t=[],r=c=>t.push(c),[i,o]=Ri(e);return t.push(o),[{Alpine:ot,effect:i,cleanup:r,evaluateLater:re.bind(re,e),evaluate:Ie.bind(Ie,e)},()=>t.forEach(c=>c())]}function $i(e,t){let r=()=>{},i=_t[t.type]||r,[o,a]=ln(e);Qr(e,t.original,a);let s=()=>{e._x_ignore||e._x_ignoreSelf||(i.inline&&i.inline(e,t,o),i=i.bind(i,e,t,o),Ht?Qe.get(fn).push(i):i())};return s.runCleanups=a,s}var hn=(e,t)=>({name:r,value:i})=>(r.startsWith(e)&&(r=r.replace(e,t)),{name:r,value:i}),pn=e=>e;function gn(e=()=>{}){return({name:t,value:r})=>{let{name:i,value:o}=mn.reduce((a,s)=>s(a),{name:t,value:r});return i!==t&&e(i,t),{name:i,value:o}}}var mn=[];function pr(e){mn.push(e)}function vn({name:e}){return yn().test(e)}var yn=()=>new RegExp(`^${lr}([^:^.]+)\\b`);function zi(e,t){return({name:r,value:i})=>{let o=r.match(yn()),a=r.match(/:([a-zA-Z0-9\-_:]+)/),s=r.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],c=t||e[r]||r;return{type:o?o[1]:null,value:a?a[1]:null,modifiers:s.map(h=>h.replace(".","")),expression:i,original:c}}}var Jt="DEFAULT",Oe=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",Jt,"teleport"];function Wi(e,t){let r=Oe.indexOf(e.type)===-1?Jt:e.type,i=Oe.indexOf(t.type)===-1?Jt:t.type;return Oe.indexOf(r)-Oe.indexOf(i)}function et(e,t,r={}){e.dispatchEvent(new CustomEvent(t,{detail:r,bubbles:!0,composed:!0,cancelable:!0}))}function Fe(e,t){if(typeof ShadowRoot=="function"&&e instanceof ShadowRoot){Array.from(e.children).forEach(o=>Fe(o,t));return}let r=!1;if(t(e,()=>r=!0),r)return;let i=e.firstElementChild;for(;i;)Fe(i,t),i=i.nextElementSibling}function ue(e,...t){console.warn(`Alpine Warning: ${e}`,...t)}var Dr=!1;function Ki(){Dr&&ue("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),Dr=!0,document.body||ue("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),et(document,"alpine:init"),et(document,"alpine:initializing"),dr(),Si(t=>Se(t,Fe)),ar(t=>Ve(t)),Zr((t,r)=>{hr(t,r).forEach(i=>i())});let e=t=>!Rt(t.parentElement,!0);Array.from(document.querySelectorAll(_n().join(","))).filter(e).forEach(t=>{Se(t)}),et(document,"alpine:initialized"),setTimeout(()=>{Hi()})}var gr=[],bn=[];function wn(){return gr.map(e=>e())}function _n(){return gr.concat(bn).map(e=>e())}function xn(e){gr.push(e)}function Rn(e){bn.push(e)}function Rt(e,t=!1){return qe(e,r=>{if((t?_n():wn()).some(o=>r.matches(o)))return!0})}function qe(e,t){if(e){if(t(e))return e;if(e._x_teleportBack&&(e=e._x_teleportBack),!!e.parentElement)return qe(e.parentElement,t)}}function qi(e){return wn().some(t=>e.matches(t))}var Sn=[];function Vi(e){Sn.push(e)}var Gi=1;function Se(e,t=Fe,r=()=>{}){qe(e,i=>i._x_ignore)||Ni(()=>{t(e,(i,o)=>{i._x_marker||(r(i,o),Sn.forEach(a=>a(i,o)),hr(i,i.attributes).forEach(a=>a()),i._x_ignore||(i._x_marker=Gi++),i._x_ignore&&o())})})}function Ve(e,t=Fe){t(e,r=>{Ai(r),en(r),delete r._x_marker})}function Hi(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([t,r,i])=>{Ui(r)||i.some(o=>{if(document.querySelector(o))return ue(`found "${o}", but missing ${t} plugin`),!0})})}var Yt=[],mr=!1;function vr(e=()=>{}){return queueMicrotask(()=>{mr||setTimeout(()=>{Xt()})}),new Promise(t=>{Yt.push(()=>{e(),t()})})}function Xt(){for(mr=!1;Yt.length;)Yt.shift()()}function Ji(){mr=!0}function yr(e,t){return Array.isArray(t)?Ir(e,t.join(" ")):typeof t=="object"&&t!==null?Yi(e,t):typeof t=="function"?yr(e,t()):Ir(e,t)}function Ir(e,t){let r=o=>o.split(" ").filter(a=>!e.classList.contains(a)).filter(Boolean),i=o=>(e.classList.add(...o),()=>{e.classList.remove(...o)});return t=t===!0?t="":t||"",i(r(t))}function Yi(e,t){let r=c=>c.split(" ").filter(Boolean),i=Object.entries(t).flatMap(([c,h])=>h?r(c):!1).filter(Boolean),o=Object.entries(t).flatMap(([c,h])=>h?!1:r(c)).filter(Boolean),a=[],s=[];return o.forEach(c=>{e.classList.contains(c)&&(e.classList.remove(c),s.push(c))}),i.forEach(c=>{e.classList.contains(c)||(e.classList.add(c),a.push(c))}),()=>{s.forEach(c=>e.classList.add(c)),a.forEach(c=>e.classList.remove(c))}}function St(e,t){return typeof t=="object"&&t!==null?Xi(e,t):Zi(e,t)}function Xi(e,t){let r={};return Object.entries(t).forEach(([i,o])=>{r[i]=e.style[i],i.startsWith("--")||(i=Qi(i)),e.style.setProperty(i,o)}),setTimeout(()=>{e.style.length===0&&e.removeAttribute("style")}),()=>{St(e,r)}}function Zi(e,t){let r=e.getAttribute("style",t);return e.setAttribute("style",t),()=>{e.setAttribute("style",r||"")}}function Qi(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Zt(e,t=()=>{}){let r=!1;return function(){r?t.apply(this,arguments):(r=!0,e.apply(this,arguments))}}H("transition",(e,{value:t,modifiers:r,expression:i},{evaluate:o})=>{typeof i=="function"&&(i=o(i)),i!==!1&&(!i||typeof i=="boolean"?to(e,r,t):eo(e,i,t))});function eo(e,t,r){An(e,yr,""),{enter:o=>{e._x_transition.enter.during=o},"enter-start":o=>{e._x_transition.enter.start=o},"enter-end":o=>{e._x_transition.enter.end=o},leave:o=>{e._x_transition.leave.during=o},"leave-start":o=>{e._x_transition.leave.start=o},"leave-end":o=>{e._x_transition.leave.end=o}}[r](t)}function to(e,t,r){An(e,St);let i=!t.includes("in")&&!t.includes("out")&&!r,o=i||t.includes("in")||["enter"].includes(r),a=i||t.includes("out")||["leave"].includes(r);t.includes("in")&&!i&&(t=t.filter(($,K)=>K<t.indexOf("out"))),t.includes("out")&&!i&&(t=t.filter(($,K)=>K>t.indexOf("out")));let s=!t.includes("opacity")&&!t.includes("scale"),c=s||t.includes("opacity"),h=s||t.includes("scale"),w=c?0:1,R=h?Xe(t,"scale",95)/100:1,P=Xe(t,"delay",0)/1e3,B=Xe(t,"origin","center"),W="opacity, transform",G=Xe(t,"duration",150)/1e3,de=Xe(t,"duration",75)/1e3,k="cubic-bezier(0.4, 0.0, 0.2, 1)";o&&(e._x_transition.enter.during={transformOrigin:B,transitionDelay:`${P}s`,transitionProperty:W,transitionDuration:`${G}s`,transitionTimingFunction:k},e._x_transition.enter.start={opacity:w,transform:`scale(${R})`},e._x_transition.enter.end={opacity:1,transform:"scale(1)"}),a&&(e._x_transition.leave.during={transformOrigin:B,transitionDelay:`${P}s`,transitionProperty:W,transitionDuration:`${de}s`,transitionTimingFunction:k},e._x_transition.leave.start={opacity:1,transform:"scale(1)"},e._x_transition.leave.end={opacity:w,transform:`scale(${R})`})}function An(e,t,r={}){e._x_transition||(e._x_transition={enter:{during:r,start:r,end:r},leave:{during:r,start:r,end:r},in(i=()=>{},o=()=>{}){Qt(e,t,{during:this.enter.during,start:this.enter.start,end:this.enter.end},i,o)},out(i=()=>{},o=()=>{}){Qt(e,t,{during:this.leave.during,start:this.leave.start,end:this.leave.end},i,o)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(e,t,r,i){const o=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let a=()=>o(r);if(t){e._x_transition&&(e._x_transition.enter||e._x_transition.leave)?e._x_transition.enter&&(Object.entries(e._x_transition.enter.during).length||Object.entries(e._x_transition.enter.start).length||Object.entries(e._x_transition.enter.end).length)?e._x_transition.in(r):a():e._x_transition?e._x_transition.in(r):a();return}e._x_hidePromise=e._x_transition?new Promise((s,c)=>{e._x_transition.out(()=>{},()=>s(i)),e._x_transitioning&&e._x_transitioning.beforeCancel(()=>c({isFromCancelledTransition:!0}))}):Promise.resolve(i),queueMicrotask(()=>{let s=Cn(e);s?(s._x_hideChildren||(s._x_hideChildren=[]),s._x_hideChildren.push(e)):o(()=>{let c=h=>{let w=Promise.all([h._x_hidePromise,...(h._x_hideChildren||[]).map(c)]).then(([R])=>R==null?void 0:R());return delete h._x_hidePromise,delete h._x_hideChildren,w};c(e).catch(h=>{if(!h.isFromCancelledTransition)throw h})})})};function Cn(e){let t=e.parentNode;if(t)return t._x_hidePromise?t:Cn(t)}function Qt(e,t,{during:r,start:i,end:o}={},a=()=>{},s=()=>{}){if(e._x_transitioning&&e._x_transitioning.cancel(),Object.keys(r).length===0&&Object.keys(i).length===0&&Object.keys(o).length===0){a(),s();return}let c,h,w;ro(e,{start(){c=t(e,i)},during(){h=t(e,r)},before:a,end(){c(),w=t(e,o)},after:s,cleanup(){h(),w()}})}function ro(e,t){let r,i,o,a=Zt(()=>{V(()=>{r=!0,i||t.before(),o||(t.end(),Xt()),t.after(),e.isConnected&&t.cleanup(),delete e._x_transitioning})});e._x_transitioning={beforeCancels:[],beforeCancel(s){this.beforeCancels.push(s)},cancel:Zt(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();a()}),finish:a},V(()=>{t.start(),t.during()}),Ji(),requestAnimationFrame(()=>{if(r)return;let s=Number(getComputedStyle(e).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,c=Number(getComputedStyle(e).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;s===0&&(s=Number(getComputedStyle(e).animationDuration.replace("s",""))*1e3),V(()=>{t.before()}),i=!0,requestAnimationFrame(()=>{r||(V(()=>{t.end()}),Xt(),setTimeout(e._x_transitioning.finish,s+c),o=!0)})})}function Xe(e,t,r){if(e.indexOf(t)===-1)return r;const i=e[e.indexOf(t)+1];if(!i||t==="scale"&&isNaN(i))return r;if(t==="duration"||t==="delay"){let o=i.match(/([0-9]+)ms/);if(o)return o[1]}return t==="origin"&&["top","right","left","center","bottom"].includes(e[e.indexOf(t)+2])?[i,e[e.indexOf(t)+2]].join(" "):i}var Ce=!1;function Me(e,t=()=>{}){return(...r)=>Ce?t(...r):e(...r)}function no(e){return(...t)=>Ce&&e(...t)}var Tn=[];function At(e){Tn.push(e)}function io(e,t){Tn.forEach(r=>r(e,t)),Ce=!0,Mn(()=>{Se(t,(r,i)=>{i(r,()=>{})})}),Ce=!1}var er=!1;function oo(e,t){t._x_dataStack||(t._x_dataStack=e._x_dataStack),Ce=!0,er=!0,Mn(()=>{ao(t)}),Ce=!1,er=!1}function ao(e){let t=!1;Se(e,(i,o)=>{Fe(i,(a,s)=>{if(t&&qi(a))return s();t=!0,o(a,s)})})}function Mn(e){let t=je;Or((r,i)=>{let o=t(r);return We(o),()=>{}}),e(),Or(t)}function En(e,t,r,i=[]){switch(e._x_bindings||(e._x_bindings=ze({})),e._x_bindings[t]=r,t=i.includes("camel")?go(t):t,t){case"value":so(e,r);break;case"style":co(e,r);break;case"class":uo(e,r);break;case"selected":case"checked":fo(e,t,r);break;default:Ln(e,t,r);break}}function so(e,t){if(Dn(e))e.attributes.value===void 0&&(e.value=t),window.fromModel&&(typeof t=="boolean"?e.checked=yt(e.value)===t:e.checked=Pr(e.value,t));else if(br(e))Number.isInteger(t)?e.value=t:!Array.isArray(t)&&typeof t!="boolean"&&![null,void 0].includes(t)?e.value=String(t):Array.isArray(t)?e.checked=t.some(r=>Pr(r,e.value)):e.checked=!!t;else if(e.tagName==="SELECT")po(e,t);else{if(e.value===t)return;e.value=t===void 0?"":t}}function uo(e,t){e._x_undoAddedClasses&&e._x_undoAddedClasses(),e._x_undoAddedClasses=yr(e,t)}function co(e,t){e._x_undoAddedStyles&&e._x_undoAddedStyles(),e._x_undoAddedStyles=St(e,t)}function fo(e,t,r){Ln(e,t,r),ho(e,t,r)}function Ln(e,t,r){[null,void 0,!1].includes(r)&&vo(t)?e.removeAttribute(t):(kn(t)&&(r=t),lo(e,t,r))}function lo(e,t,r){e.getAttribute(t)!=r&&e.setAttribute(t,r)}function ho(e,t,r){e[t]!==r&&(e[t]=r)}function po(e,t){const r=[].concat(t).map(i=>i+"");Array.from(e.options).forEach(i=>{i.selected=r.includes(i.value)})}function go(e){return e.toLowerCase().replace(/-(\w)/g,(t,r)=>r.toUpperCase())}function Pr(e,t){return e==t}function yt(e){return[1,"1","true","on","yes",!0].includes(e)?!0:[0,"0","false","off","no",!1].includes(e)?!1:e?!!e:null}var mo=new Set(["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","shadowrootclonable","shadowrootdelegatesfocus","shadowrootserializable"]);function kn(e){return mo.has(e)}function vo(e){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(e)}function yo(e,t,r){return e._x_bindings&&e._x_bindings[t]!==void 0?e._x_bindings[t]:On(e,t,r)}function bo(e,t,r,i=!0){if(e._x_bindings&&e._x_bindings[t]!==void 0)return e._x_bindings[t];if(e._x_inlineBindings&&e._x_inlineBindings[t]!==void 0){let o=e._x_inlineBindings[t];return o.extract=i,sn(()=>Ie(e,o.expression))}return On(e,t,r)}function On(e,t,r){let i=e.getAttribute(t);return i===null?typeof r=="function"?r():r:i===""?!0:kn(t)?!![t,"true"].includes(i):i}function br(e){return e.type==="checkbox"||e.localName==="ui-checkbox"||e.localName==="ui-switch"}function Dn(e){return e.type==="radio"||e.localName==="ui-radio"}function In(e,t){var r;return function(){var i=this,o=arguments,a=function(){r=null,e.apply(i,o)};clearTimeout(r),r=setTimeout(a,t)}}function Pn(e,t){let r;return function(){let i=this,o=arguments;r||(e.apply(i,o),r=!0,setTimeout(()=>r=!1,t))}}function Bn({get:e,set:t},{get:r,set:i}){let o=!0,a,s=je(()=>{let c=e(),h=r();if(o)i(Bt(c)),o=!1;else{let w=JSON.stringify(c),R=JSON.stringify(h);w!==a?i(Bt(c)):w!==R&&t(Bt(h))}a=JSON.stringify(e()),JSON.stringify(r())});return()=>{We(s)}}function Bt(e){return typeof e=="object"?JSON.parse(JSON.stringify(e)):e}function wo(e){(Array.isArray(e)?e:[e]).forEach(r=>r(ot))}var ke={},Br=!1;function _o(e,t){if(Br||(ke=ze(ke),Br=!0),t===void 0)return ke[e];ke[e]=t,nn(ke[e]),typeof t=="object"&&t!==null&&t.hasOwnProperty("init")&&typeof t.init=="function"&&ke[e].init()}function xo(){return ke}var Fn={};function Ro(e,t){let r=typeof t!="function"?()=>t:t;return e instanceof Element?jn(e,r()):(Fn[e]=r,()=>{})}function So(e){return Object.entries(Fn).forEach(([t,r])=>{Object.defineProperty(e,t,{get(){return(...i)=>r(...i)}})}),e}function jn(e,t,r){let i=[];for(;i.length;)i.pop()();let o=Object.entries(t).map(([s,c])=>({name:s,value:c})),a=cn(o);return o=o.map(s=>a.find(c=>c.name===s.name)?{name:`x-bind:${s.name}`,value:`"${s.value}"`}:s),hr(e,o,r).map(s=>{i.push(s.runCleanups),s()}),()=>{for(;i.length;)i.pop()()}}var Un={};function Ao(e,t){Un[e]=t}function Co(e,t){return Object.entries(Un).forEach(([r,i])=>{Object.defineProperty(e,r,{get(){return(...o)=>i.bind(t)(...o)},enumerable:!1})}),e}var To={get reactive(){return ze},get release(){return We},get effect(){return je},get raw(){return Gr},version:"3.14.8",flushAndStopDeferringMutations:Mi,dontAutoEvaluateFunctions:sn,disableEffectScheduling:_i,startObservingMutations:dr,stopObservingMutations:tn,setReactivityEngine:xi,onAttributeRemoved:Qr,onAttributesAdded:Zr,closestDataStack:Ne,skipDuringClone:Me,onlyDuringClone:no,addRootSelector:xn,addInitSelector:Rn,interceptClone:At,addScopeToNode:nt,deferMutations:Ti,mapAttributes:pr,evaluateLater:re,interceptInit:Vi,setEvaluator:Ii,mergeProxies:it,extractProp:bo,findClosest:qe,onElRemoved:ar,closestRoot:Rt,destroyTree:Ve,interceptor:on,transition:Qt,setStyles:St,mutateDom:V,directive:H,entangle:Bn,throttle:Pn,debounce:In,evaluate:Ie,initTree:Se,nextTick:vr,prefixed:Ke,prefix:ji,plugin:wo,magic:he,store:_o,start:Ki,clone:oo,cloneNode:io,bound:yo,$data:rn,watch:Hr,walk:Fe,data:Ao,bind:Ro},ot=To;function Mo(e,t){const r=Object.create(null),i=e.split(",");for(let o=0;o<i.length;o++)r[i[o]]=!0;return o=>!!r[o]}var Eo=Object.freeze({}),Lo=Object.prototype.hasOwnProperty,Ct=(e,t)=>Lo.call(e,t),Pe=Array.isArray,tt=e=>Nn(e)==="[object Map]",ko=e=>typeof e=="string",wr=e=>typeof e=="symbol",Tt=e=>e!==null&&typeof e=="object",Oo=Object.prototype.toString,Nn=e=>Oo.call(e),$n=e=>Nn(e).slice(8,-1),_r=e=>ko(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Do=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},Io=Do(e=>e.charAt(0).toUpperCase()+e.slice(1)),zn=(e,t)=>e!==t&&(e===e||t===t),tr=new WeakMap,Ze=[],me,Be=Symbol("iterate"),rr=Symbol("Map key iterate");function Po(e){return e&&e._isEffect===!0}function Bo(e,t=Eo){Po(e)&&(e=e.raw);const r=Uo(e,t);return t.lazy||r(),r}function Fo(e){e.active&&(Wn(e),e.options.onStop&&e.options.onStop(),e.active=!1)}var jo=0;function Uo(e,t){const r=function(){if(!r.active)return e();if(!Ze.includes(r)){Wn(r);try{return $o(),Ze.push(r),me=r,e()}finally{Ze.pop(),Kn(),me=Ze[Ze.length-1]}}};return r.id=jo++,r.allowRecurse=!!t.allowRecurse,r._isEffect=!0,r.active=!0,r.raw=e,r.deps=[],r.options=t,r}function Wn(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}var $e=!0,xr=[];function No(){xr.push($e),$e=!1}function $o(){xr.push($e),$e=!0}function Kn(){const e=xr.pop();$e=e===void 0?!0:e}function le(e,t,r){if(!$e||me===void 0)return;let i=tr.get(e);i||tr.set(e,i=new Map);let o=i.get(r);o||i.set(r,o=new Set),o.has(me)||(o.add(me),me.deps.push(o),me.options.onTrack&&me.options.onTrack({effect:me,target:e,type:t,key:r}))}function Te(e,t,r,i,o,a){const s=tr.get(e);if(!s)return;const c=new Set,h=R=>{R&&R.forEach(P=>{(P!==me||P.allowRecurse)&&c.add(P)})};if(t==="clear")s.forEach(h);else if(r==="length"&&Pe(e))s.forEach((R,P)=>{(P==="length"||P>=i)&&h(R)});else switch(r!==void 0&&h(s.get(r)),t){case"add":Pe(e)?_r(r)&&h(s.get("length")):(h(s.get(Be)),tt(e)&&h(s.get(rr)));break;case"delete":Pe(e)||(h(s.get(Be)),tt(e)&&h(s.get(rr)));break;case"set":tt(e)&&h(s.get(Be));break}const w=R=>{R.options.onTrigger&&R.options.onTrigger({effect:R,target:e,key:r,type:t,newValue:i,oldValue:o,oldTarget:a}),R.options.scheduler?R.options.scheduler(R):R()};c.forEach(w)}var zo=Mo("__proto__,__v_isRef,__isVue"),qn=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(wr)),Wo=Vn(),Ko=Vn(!0),Fr=qo();function qo(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const i=z(this);for(let a=0,s=this.length;a<s;a++)le(i,"get",a+"");const o=i[t](...r);return o===-1||o===!1?i[t](...r.map(z)):o}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){No();const i=z(this)[t].apply(this,r);return Kn(),i}}),e}function Vn(e=!1,t=!1){return function(i,o,a){if(o==="__v_isReactive")return!e;if(o==="__v_isReadonly")return e;if(o==="__v_raw"&&a===(e?t?oa:Yn:t?ia:Jn).get(i))return i;const s=Pe(i);if(!e&&s&&Ct(Fr,o))return Reflect.get(Fr,o,a);const c=Reflect.get(i,o,a);return(wr(o)?qn.has(o):zo(o))||(e||le(i,"get",o),t)?c:nr(c)?!s||!_r(o)?c.value:c:Tt(c)?e?Xn(c):Cr(c):c}}var Vo=Go();function Go(e=!1){return function(r,i,o,a){let s=r[i];if(!e&&(o=z(o),s=z(s),!Pe(r)&&nr(s)&&!nr(o)))return s.value=o,!0;const c=Pe(r)&&_r(i)?Number(i)<r.length:Ct(r,i),h=Reflect.set(r,i,o,a);return r===z(a)&&(c?zn(o,s)&&Te(r,"set",i,o,s):Te(r,"add",i,o)),h}}function Ho(e,t){const r=Ct(e,t),i=e[t],o=Reflect.deleteProperty(e,t);return o&&r&&Te(e,"delete",t,void 0,i),o}function Jo(e,t){const r=Reflect.has(e,t);return(!wr(t)||!qn.has(t))&&le(e,"has",t),r}function Yo(e){return le(e,"iterate",Pe(e)?"length":Be),Reflect.ownKeys(e)}var Xo={get:Wo,set:Vo,deleteProperty:Ho,has:Jo,ownKeys:Yo},Zo={get:Ko,set(e,t){return console.warn(`Set operation on key "${String(t)}" failed: target is readonly.`,e),!0},deleteProperty(e,t){return console.warn(`Delete operation on key "${String(t)}" failed: target is readonly.`,e),!0}},Rr=e=>Tt(e)?Cr(e):e,Sr=e=>Tt(e)?Xn(e):e,Ar=e=>e,Mt=e=>Reflect.getPrototypeOf(e);function lt(e,t,r=!1,i=!1){e=e.__v_raw;const o=z(e),a=z(t);t!==a&&!r&&le(o,"get",t),!r&&le(o,"get",a);const{has:s}=Mt(o),c=i?Ar:r?Sr:Rr;if(s.call(o,t))return c(e.get(t));if(s.call(o,a))return c(e.get(a));e!==o&&e.get(t)}function ht(e,t=!1){const r=this.__v_raw,i=z(r),o=z(e);return e!==o&&!t&&le(i,"has",e),!t&&le(i,"has",o),e===o?r.has(e):r.has(e)||r.has(o)}function pt(e,t=!1){return e=e.__v_raw,!t&&le(z(e),"iterate",Be),Reflect.get(e,"size",e)}function jr(e){e=z(e);const t=z(this);return Mt(t).has.call(t,e)||(t.add(e),Te(t,"add",e,e)),this}function Ur(e,t){t=z(t);const r=z(this),{has:i,get:o}=Mt(r);let a=i.call(r,e);a?Hn(r,i,e):(e=z(e),a=i.call(r,e));const s=o.call(r,e);return r.set(e,t),a?zn(t,s)&&Te(r,"set",e,t,s):Te(r,"add",e,t),this}function Nr(e){const t=z(this),{has:r,get:i}=Mt(t);let o=r.call(t,e);o?Hn(t,r,e):(e=z(e),o=r.call(t,e));const a=i?i.call(t,e):void 0,s=t.delete(e);return o&&Te(t,"delete",e,void 0,a),s}function $r(){const e=z(this),t=e.size!==0,r=tt(e)?new Map(e):new Set(e),i=e.clear();return t&&Te(e,"clear",void 0,void 0,r),i}function gt(e,t){return function(i,o){const a=this,s=a.__v_raw,c=z(s),h=t?Ar:e?Sr:Rr;return!e&&le(c,"iterate",Be),s.forEach((w,R)=>i.call(o,h(w),h(R),a))}}function mt(e,t,r){return function(...i){const o=this.__v_raw,a=z(o),s=tt(a),c=e==="entries"||e===Symbol.iterator&&s,h=e==="keys"&&s,w=o[e](...i),R=r?Ar:t?Sr:Rr;return!t&&le(a,"iterate",h?rr:Be),{next(){const{value:P,done:B}=w.next();return B?{value:P,done:B}:{value:c?[R(P[0]),R(P[1])]:R(P),done:B}},[Symbol.iterator](){return this}}}}function Ae(e){return function(...t){{const r=t[0]?`on key "${t[0]}" `:"";console.warn(`${Io(e)} operation ${r}failed: target is readonly.`,z(this))}return e==="delete"?!1:this}}function Qo(){const e={get(a){return lt(this,a)},get size(){return pt(this)},has:ht,add:jr,set:Ur,delete:Nr,clear:$r,forEach:gt(!1,!1)},t={get(a){return lt(this,a,!1,!0)},get size(){return pt(this)},has:ht,add:jr,set:Ur,delete:Nr,clear:$r,forEach:gt(!1,!0)},r={get(a){return lt(this,a,!0)},get size(){return pt(this,!0)},has(a){return ht.call(this,a,!0)},add:Ae("add"),set:Ae("set"),delete:Ae("delete"),clear:Ae("clear"),forEach:gt(!0,!1)},i={get(a){return lt(this,a,!0,!0)},get size(){return pt(this,!0)},has(a){return ht.call(this,a,!0)},add:Ae("add"),set:Ae("set"),delete:Ae("delete"),clear:Ae("clear"),forEach:gt(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{e[a]=mt(a,!1,!1),r[a]=mt(a,!0,!1),t[a]=mt(a,!1,!0),i[a]=mt(a,!0,!0)}),[e,r,t,i]}var[ea,ta,Ya,Xa]=Qo();function Gn(e,t){const r=e?ta:ea;return(i,o,a)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?i:Reflect.get(Ct(r,o)&&o in i?r:i,o,a)}var ra={get:Gn(!1)},na={get:Gn(!0)};function Hn(e,t,r){const i=z(r);if(i!==r&&t.call(e,i)){const o=$n(e);console.warn(`Reactive ${o} contains both the raw and reactive versions of the same object${o==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var Jn=new WeakMap,ia=new WeakMap,Yn=new WeakMap,oa=new WeakMap;function aa(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function sa(e){return e.__v_skip||!Object.isExtensible(e)?0:aa($n(e))}function Cr(e){return e&&e.__v_isReadonly?e:Zn(e,!1,Xo,ra,Jn)}function Xn(e){return Zn(e,!0,Zo,na,Yn)}function Zn(e,t,r,i,o){if(!Tt(e))return console.warn(`value cannot be made reactive: ${String(e)}`),e;if(e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=o.get(e);if(a)return a;const s=sa(e);if(s===0)return e;const c=new Proxy(e,s===2?i:r);return o.set(e,c),c}function z(e){return e&&z(e.__v_raw)||e}function nr(e){return!!(e&&e.__v_isRef===!0)}he("nextTick",()=>vr);he("dispatch",e=>et.bind(et,e));he("watch",(e,{evaluateLater:t,cleanup:r})=>(i,o)=>{let a=t(i),c=Hr(()=>{let h;return a(w=>h=w),h},o);r(c)});he("store",xo);he("data",e=>rn(e));he("root",e=>Rt(e));he("refs",e=>(e._x_refs_proxy||(e._x_refs_proxy=it(ua(e))),e._x_refs_proxy));function ua(e){let t=[];return qe(e,r=>{r._x_refs&&t.push(r._x_refs)}),t}var Ft={};function Qn(e){return Ft[e]||(Ft[e]=0),++Ft[e]}function da(e,t){return qe(e,r=>{if(r._x_ids&&r._x_ids[t])return!0})}function ca(e,t){e._x_ids||(e._x_ids={}),e._x_ids[t]||(e._x_ids[t]=Qn(t))}he("id",(e,{cleanup:t})=>(r,i=null)=>{let o=`${r}${i?`-${i}`:""}`;return fa(e,o,t,()=>{let a=da(e,r),s=a?a._x_ids[r]:Qn(r);return i?`${r}-${s}-${i}`:`${r}-${s}`})});At((e,t)=>{e._x_id&&(t._x_id=e._x_id)});function fa(e,t,r,i){if(e._x_id||(e._x_id={}),e._x_id[t])return e._x_id[t];let o=i();return e._x_id[t]=o,r(()=>{delete e._x_id[t]}),o}he("el",e=>e);ei("Focus","focus","focus");ei("Persist","persist","persist");function ei(e,t,r){he(t,i=>ue(`You can't use [$${t}] without first installing the "${e}" plugin here: https://alpinejs.dev/plugins/${r}`,i))}H("modelable",(e,{expression:t},{effect:r,evaluateLater:i,cleanup:o})=>{let a=i(t),s=()=>{let R;return a(P=>R=P),R},c=i(`${t} = __placeholder`),h=R=>c(()=>{},{scope:{__placeholder:R}}),w=s();h(w),queueMicrotask(()=>{if(!e._x_model)return;e._x_removeModelListeners.default();let R=e._x_model.get,P=e._x_model.set,B=Bn({get(){return R()},set(W){P(W)}},{get(){return s()},set(W){h(W)}});o(B)})});H("teleport",(e,{modifiers:t,expression:r},{cleanup:i})=>{e.tagName.toLowerCase()!=="template"&&ue("x-teleport can only be used on a <template> tag",e);let o=zr(r),a=e.content.cloneNode(!0).firstElementChild;e._x_teleport=a,a._x_teleportBack=e,e.setAttribute("data-teleport-template",!0),a.setAttribute("data-teleport-target",!0),e._x_forwardEvents&&e._x_forwardEvents.forEach(c=>{a.addEventListener(c,h=>{h.stopPropagation(),e.dispatchEvent(new h.constructor(h.type,h))})}),nt(a,{},e);let s=(c,h,w)=>{w.includes("prepend")?h.parentNode.insertBefore(c,h):w.includes("append")?h.parentNode.insertBefore(c,h.nextSibling):h.appendChild(c)};V(()=>{s(a,o,t),Me(()=>{Se(a)})()}),e._x_teleportPutBack=()=>{let c=zr(r);V(()=>{s(e._x_teleport,c,t)})},i(()=>V(()=>{a.remove(),Ve(a)}))});var la=document.createElement("div");function zr(e){let t=Me(()=>document.querySelector(e),()=>la)();return t||ue(`Cannot find x-teleport element for selector: "${e}"`),t}var ti=()=>{};ti.inline=(e,{modifiers:t},{cleanup:r})=>{t.includes("self")?e._x_ignoreSelf=!0:e._x_ignore=!0,r(()=>{t.includes("self")?delete e._x_ignoreSelf:delete e._x_ignore})};H("ignore",ti);H("effect",Me((e,{expression:t},{effect:r})=>{r(re(e,t))}));function ir(e,t,r,i){let o=e,a=h=>i(h),s={},c=(h,w)=>R=>w(h,R);if(r.includes("dot")&&(t=ha(t)),r.includes("camel")&&(t=pa(t)),r.includes("passive")&&(s.passive=!0),r.includes("capture")&&(s.capture=!0),r.includes("window")&&(o=window),r.includes("document")&&(o=document),r.includes("debounce")){let h=r[r.indexOf("debounce")+1]||"invalid-wait",w=xt(h.split("ms")[0])?Number(h.split("ms")[0]):250;a=In(a,w)}if(r.includes("throttle")){let h=r[r.indexOf("throttle")+1]||"invalid-wait",w=xt(h.split("ms")[0])?Number(h.split("ms")[0]):250;a=Pn(a,w)}return r.includes("prevent")&&(a=c(a,(h,w)=>{w.preventDefault(),h(w)})),r.includes("stop")&&(a=c(a,(h,w)=>{w.stopPropagation(),h(w)})),r.includes("once")&&(a=c(a,(h,w)=>{h(w),o.removeEventListener(t,a,s)})),(r.includes("away")||r.includes("outside"))&&(o=document,a=c(a,(h,w)=>{e.contains(w.target)||w.target.isConnected!==!1&&(e.offsetWidth<1&&e.offsetHeight<1||e._x_isShown!==!1&&h(w))})),r.includes("self")&&(a=c(a,(h,w)=>{w.target===e&&h(w)})),(ma(t)||ri(t))&&(a=c(a,(h,w)=>{va(w,r)||h(w)})),o.addEventListener(t,a,s),()=>{o.removeEventListener(t,a,s)}}function ha(e){return e.replace(/-/g,".")}function pa(e){return e.toLowerCase().replace(/-(\w)/g,(t,r)=>r.toUpperCase())}function xt(e){return!Array.isArray(e)&&!isNaN(e)}function ga(e){return[" ","_"].includes(e)?e:e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function ma(e){return["keydown","keyup"].includes(e)}function ri(e){return["contextmenu","click","mouse"].some(t=>e.includes(t))}function va(e,t){let r=t.filter(a=>!["window","document","prevent","stop","once","capture","self","away","outside","passive"].includes(a));if(r.includes("debounce")){let a=r.indexOf("debounce");r.splice(a,xt((r[a+1]||"invalid-wait").split("ms")[0])?2:1)}if(r.includes("throttle")){let a=r.indexOf("throttle");r.splice(a,xt((r[a+1]||"invalid-wait").split("ms")[0])?2:1)}if(r.length===0||r.length===1&&Wr(e.key).includes(r[0]))return!1;const o=["ctrl","shift","alt","meta","cmd","super"].filter(a=>r.includes(a));return r=r.filter(a=>!o.includes(a)),!(o.length>0&&o.filter(s=>((s==="cmd"||s==="super")&&(s="meta"),e[`${s}Key`])).length===o.length&&(ri(e.type)||Wr(e.key).includes(r[0])))}function Wr(e){if(!e)return[];e=ga(e);let t={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return t[e]=e,Object.keys(t).map(r=>{if(t[r]===e)return r}).filter(r=>r)}H("model",(e,{modifiers:t,expression:r},{effect:i,cleanup:o})=>{let a=e;t.includes("parent")&&(a=e.parentNode);let s=re(a,r),c;typeof r=="string"?c=re(a,`${r} = __placeholder`):typeof r=="function"&&typeof r()=="string"?c=re(a,`${r()} = __placeholder`):c=()=>{};let h=()=>{let B;return s(W=>B=W),Kr(B)?B.get():B},w=B=>{let W;s(G=>W=G),Kr(W)?W.set(B):c(()=>{},{scope:{__placeholder:B}})};typeof r=="string"&&e.type==="radio"&&V(()=>{e.hasAttribute("name")||e.setAttribute("name",r)});var R=e.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(e.type)||t.includes("lazy")?"change":"input";let P=Ce?()=>{}:ir(e,R,t,B=>{w(jt(e,t,B,h()))});if(t.includes("fill")&&([void 0,null,""].includes(h())||br(e)&&Array.isArray(h())||e.tagName.toLowerCase()==="select"&&e.multiple)&&w(jt(e,t,{target:e},h())),e._x_removeModelListeners||(e._x_removeModelListeners={}),e._x_removeModelListeners.default=P,o(()=>e._x_removeModelListeners.default()),e.form){let B=ir(e.form,"reset",[],W=>{vr(()=>e._x_model&&e._x_model.set(jt(e,t,{target:e},h())))});o(()=>B())}e._x_model={get(){return h()},set(B){w(B)}},e._x_forceModelUpdate=B=>{B===void 0&&typeof r=="string"&&r.match(/\./)&&(B=""),window.fromModel=!0,V(()=>En(e,"value",B)),delete window.fromModel},i(()=>{let B=h();t.includes("unintrusive")&&document.activeElement.isSameNode(e)||e._x_forceModelUpdate(B)})});function jt(e,t,r,i){return V(()=>{if(r instanceof CustomEvent&&r.detail!==void 0)return r.detail!==null&&r.detail!==void 0?r.detail:r.target.value;if(br(e))if(Array.isArray(i)){let o=null;return t.includes("number")?o=Ut(r.target.value):t.includes("boolean")?o=yt(r.target.value):o=r.target.value,r.target.checked?i.includes(o)?i:i.concat([o]):i.filter(a=>!ya(a,o))}else return r.target.checked;else{if(e.tagName.toLowerCase()==="select"&&e.multiple)return t.includes("number")?Array.from(r.target.selectedOptions).map(o=>{let a=o.value||o.text;return Ut(a)}):t.includes("boolean")?Array.from(r.target.selectedOptions).map(o=>{let a=o.value||o.text;return yt(a)}):Array.from(r.target.selectedOptions).map(o=>o.value||o.text);{let o;return Dn(e)?r.target.checked?o=r.target.value:o=i:o=r.target.value,t.includes("number")?Ut(o):t.includes("boolean")?yt(o):t.includes("trim")?o.trim():o}}})}function Ut(e){let t=e?parseFloat(e):null;return ba(t)?t:e}function ya(e,t){return e==t}function ba(e){return!Array.isArray(e)&&!isNaN(e)}function Kr(e){return e!==null&&typeof e=="object"&&typeof e.get=="function"&&typeof e.set=="function"}H("cloak",e=>queueMicrotask(()=>V(()=>e.removeAttribute(Ke("cloak")))));Rn(()=>`[${Ke("init")}]`);H("init",Me((e,{expression:t},{evaluate:r})=>typeof t=="string"?!!t.trim()&&r(t,{},!1):r(t,{},!1)));H("text",(e,{expression:t},{effect:r,evaluateLater:i})=>{let o=i(t);r(()=>{o(a=>{V(()=>{e.textContent=a})})})});H("html",(e,{expression:t},{effect:r,evaluateLater:i})=>{let o=i(t);r(()=>{o(a=>{V(()=>{e.innerHTML=a,e._x_ignoreSelf=!0,Se(e),delete e._x_ignoreSelf})})})});pr(hn(":",pn(Ke("bind:"))));var ni=(e,{value:t,modifiers:r,expression:i,original:o},{effect:a,cleanup:s})=>{if(!t){let h={};So(h),re(e,i)(R=>{jn(e,R,o)},{scope:h});return}if(t==="key")return wa(e,i);if(e._x_inlineBindings&&e._x_inlineBindings[t]&&e._x_inlineBindings[t].extract)return;let c=re(e,i);a(()=>c(h=>{h===void 0&&typeof i=="string"&&i.match(/\./)&&(h=""),V(()=>En(e,t,h,r))})),s(()=>{e._x_undoAddedClasses&&e._x_undoAddedClasses(),e._x_undoAddedStyles&&e._x_undoAddedStyles()})};ni.inline=(e,{value:t,modifiers:r,expression:i})=>{t&&(e._x_inlineBindings||(e._x_inlineBindings={}),e._x_inlineBindings[t]={expression:i,extract:!1})};H("bind",ni);function wa(e,t){e._x_keyExpression=t}xn(()=>`[${Ke("data")}]`);H("data",(e,{expression:t},{cleanup:r})=>{if(_a(e))return;t=t===""?"{}":t;let i={};Gt(i,e);let o={};Co(o,i);let a=Ie(e,t,{scope:o});(a===void 0||a===!0)&&(a={}),Gt(a,e);let s=ze(a);nn(s);let c=nt(e,s);s.init&&Ie(e,s.init),r(()=>{s.destroy&&Ie(e,s.destroy),c()})});At((e,t)=>{e._x_dataStack&&(t._x_dataStack=e._x_dataStack,t.setAttribute("data-has-alpine-state",!0))});function _a(e){return Ce?er?!0:e.hasAttribute("data-has-alpine-state"):!1}H("show",(e,{modifiers:t,expression:r},{effect:i})=>{let o=re(e,r);e._x_doHide||(e._x_doHide=()=>{V(()=>{e.style.setProperty("display","none",t.includes("important")?"important":void 0)})}),e._x_doShow||(e._x_doShow=()=>{V(()=>{e.style.length===1&&e.style.display==="none"?e.removeAttribute("style"):e.style.removeProperty("display")})});let a=()=>{e._x_doHide(),e._x_isShown=!1},s=()=>{e._x_doShow(),e._x_isShown=!0},c=()=>setTimeout(s),h=Zt(P=>P?s():a(),P=>{typeof e._x_toggleAndCascadeWithTransitions=="function"?e._x_toggleAndCascadeWithTransitions(e,P,s,a):P?c():a()}),w,R=!0;i(()=>o(P=>{!R&&P===w||(t.includes("immediate")&&(P?c():a()),h(P),w=P,R=!1)}))});H("for",(e,{expression:t},{effect:r,cleanup:i})=>{let o=Ra(t),a=re(e,o.items),s=re(e,e._x_keyExpression||"index");e._x_prevKeys=[],e._x_lookup={},r(()=>xa(e,o,a,s)),i(()=>{Object.values(e._x_lookup).forEach(c=>V(()=>{Ve(c),c.remove()})),delete e._x_prevKeys,delete e._x_lookup})});function xa(e,t,r,i){let o=s=>typeof s=="object"&&!Array.isArray(s),a=e;r(s=>{Sa(s)&&s>=0&&(s=Array.from(Array(s).keys(),k=>k+1)),s===void 0&&(s=[]);let c=e._x_lookup,h=e._x_prevKeys,w=[],R=[];if(o(s))s=Object.entries(s).map(([k,$])=>{let K=qr(t,$,k,s);i(J=>{R.includes(J)&&ue("Duplicate key on x-for",e),R.push(J)},{scope:{index:k,...K}}),w.push(K)});else for(let k=0;k<s.length;k++){let $=qr(t,s[k],k,s);i(K=>{R.includes(K)&&ue("Duplicate key on x-for",e),R.push(K)},{scope:{index:k,...$}}),w.push($)}let P=[],B=[],W=[],G=[];for(let k=0;k<h.length;k++){let $=h[k];R.indexOf($)===-1&&W.push($)}h=h.filter(k=>!W.includes(k));let de="template";for(let k=0;k<R.length;k++){let $=R[k],K=h.indexOf($);if(K===-1)h.splice(k,0,$),P.push([de,k]);else if(K!==k){let J=h.splice(k,1)[0],U=h.splice(K-1,1)[0];h.splice(k,0,U),h.splice(K,0,J),B.push([J,U])}else G.push($);de=$}for(let k=0;k<W.length;k++){let $=W[k];$ in c&&(V(()=>{Ve(c[$]),c[$].remove()}),delete c[$])}for(let k=0;k<B.length;k++){let[$,K]=B[k],J=c[$],U=c[K],ve=document.createElement("div");V(()=>{U||ue('x-for ":key" is undefined or invalid',a,K,c),U.after(ve),J.after(U),U._x_currentIfEl&&U.after(U._x_currentIfEl),ve.before(J),J._x_currentIfEl&&J.after(J._x_currentIfEl),ve.remove()}),U._x_refreshXForScope(w[R.indexOf(K)])}for(let k=0;k<P.length;k++){let[$,K]=P[k],J=$==="template"?a:c[$];J._x_currentIfEl&&(J=J._x_currentIfEl);let U=w[K],ve=R[K],Ee=document.importNode(a.content,!0).firstElementChild,ye=ze(U);nt(Ee,ye,a),Ee._x_refreshXForScope=be=>{Object.entries(be).forEach(([ne,Ue])=>{ye[ne]=Ue})},V(()=>{J.after(Ee),Me(()=>Se(Ee))()}),typeof ve=="object"&&ue("x-for key cannot be an object, it must be a string or an integer",a),c[ve]=Ee}for(let k=0;k<G.length;k++)c[G[k]]._x_refreshXForScope(w[R.indexOf(G[k])]);a._x_prevKeys=R})}function Ra(e){let t=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,r=/^\s*\(|\)\s*$/g,i=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,o=e.match(i);if(!o)return;let a={};a.items=o[2].trim();let s=o[1].replace(r,"").trim(),c=s.match(t);return c?(a.item=s.replace(t,"").trim(),a.index=c[1].trim(),c[2]&&(a.collection=c[2].trim())):a.item=s,a}function qr(e,t,r,i){let o={};return/^\[.*\]$/.test(e.item)&&Array.isArray(t)?e.item.replace("[","").replace("]","").split(",").map(s=>s.trim()).forEach((s,c)=>{o[s]=t[c]}):/^\{.*\}$/.test(e.item)&&!Array.isArray(t)&&typeof t=="object"?e.item.replace("{","").replace("}","").split(",").map(s=>s.trim()).forEach(s=>{o[s]=t[s]}):o[e.item]=t,e.index&&(o[e.index]=r),e.collection&&(o[e.collection]=i),o}function Sa(e){return!Array.isArray(e)&&!isNaN(e)}function ii(){}ii.inline=(e,{expression:t},{cleanup:r})=>{let i=Rt(e);i._x_refs||(i._x_refs={}),i._x_refs[t]=e,r(()=>delete i._x_refs[t])};H("ref",ii);H("if",(e,{expression:t},{effect:r,cleanup:i})=>{e.tagName.toLowerCase()!=="template"&&ue("x-if can only be used on a <template> tag",e);let o=re(e,t),a=()=>{if(e._x_currentIfEl)return e._x_currentIfEl;let c=e.content.cloneNode(!0).firstElementChild;return nt(c,{},e),V(()=>{e.after(c),Me(()=>Se(c))()}),e._x_currentIfEl=c,e._x_undoIf=()=>{V(()=>{Ve(c),c.remove()}),delete e._x_currentIfEl},c},s=()=>{e._x_undoIf&&(e._x_undoIf(),delete e._x_undoIf)};r(()=>o(c=>{c?a():s()})),i(()=>e._x_undoIf&&e._x_undoIf())});H("id",(e,{expression:t},{evaluate:r})=>{r(t).forEach(o=>ca(e,o))});At((e,t)=>{e._x_ids&&(t._x_ids=e._x_ids)});pr(hn("@",pn(Ke("on:"))));H("on",Me((e,{value:t,modifiers:r,expression:i},{cleanup:o})=>{let a=i?re(e,i):()=>{};e.tagName.toLowerCase()==="template"&&(e._x_forwardEvents||(e._x_forwardEvents=[]),e._x_forwardEvents.includes(t)||e._x_forwardEvents.push(t));let s=ir(e,t,r,c=>{a(()=>{},{scope:{$event:c},params:[c]})});o(()=>s())}));Et("Collapse","collapse","collapse");Et("Intersect","intersect","intersect");Et("Focus","trap","focus");Et("Mask","mask","mask");function Et(e,t,r){H(t,i=>ue(`You can't use [x-${t}] without first installing the "${e}" plugin here: https://alpinejs.dev/plugins/${r}`,i))}ot.setEvaluator(dn);ot.setReactivityEngine({reactive:Cr,effect:Bo,release:Fo,raw:z});var Aa=ot,Tr=Aa,q=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ca(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Nt={exports:{}},Vr;function Ta(){return Vr||(Vr=1,function(e){/**
 * {@link https://github.com/muaz-khan/RecordRTC|RecordRTC} is a WebRTC JavaScript library for audio/video as well as screen activity recording. It supports Chrome, Firefox, Opera, Android, and Microsoft Edge. Platforms: Linux, Mac and Windows. 
 * @summary Record audio, video or screen inside the browser.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTC
 * @class
 * @example
 * var recorder = RecordRTC(mediaStream or [arrayOfMediaStream], {
 *     type: 'video', // audio or video or gif or canvas
 *     recorderType: MediaStreamRecorder || CanvasRecorder || StereoAudioRecorder || Etc
 * });
 * recorder.startRecording();
 * @see For further information:
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.
 * @param {object} config - {type:"video", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, desiredSampRate: 16000, video: HTMLVideoElement, etc.}
 */function t(d,n){if(!d)throw"First parameter is required.";n=n||{type:"video"},n=new r(d,n);var u=this;function g(p){return n.disableLogs||console.log("RecordRTC version: ",u.version),p&&(n=new r(d,p)),n.disableLogs||console.log("started recording "+n.type+" stream."),x?(x.clearRecordedData(),x.record(),M("recording"),u.recordingDuration&&_(),u):(v(function(){u.recordingDuration&&_()}),u)}function v(p){p&&(n.initCallback=function(){p(),p=n.initCallback=null});var T=new i(d,n);x=new T(d,n),x.record(),M("recording"),n.disableLogs||console.log("Initialized recorderType:",x.constructor.name,"for output-type:",n.type)}function m(p){if(p=p||function(){},!x){C();return}if(u.state==="paused"){u.resumeRecording(),setTimeout(function(){m(p)},1);return}u.state!=="recording"&&!n.disableLogs&&console.warn('Recording state should be: "recording", however current state is: ',u.state),n.disableLogs||console.log("Stopped recording "+n.type+" stream."),n.type!=="gif"?x.stop(T):(x.stop(),T()),M("stopped");function T(D){if(!x){typeof p.call=="function"?p.call(u,""):p("");return}Object.keys(x).forEach(function(L){typeof x[L]!="function"&&(u[L]=x[L])});var l=x.blob;if(!l)if(D)x.blob=l=D;else throw"Recording failed.";if(l&&!n.disableLogs&&console.log(l.type,"->",$(l.size)),p){var y;try{y=R.createObjectURL(l)}catch{}typeof p.call=="function"?p.call(u,y):p(y)}n.autoWriteToDisk&&E(function(L){var O={};O[n.type+"Blob"]=L,pe.Store(O)})}}function b(){if(!x){C();return}if(u.state!=="recording"){n.disableLogs||console.warn("Unable to pause the recording. Recording state: ",u.state);return}M("paused"),x.pause(),n.disableLogs||console.log("Paused recording.")}function f(){if(!x){C();return}if(u.state!=="paused"){n.disableLogs||console.warn("Unable to resume the recording. Recording state: ",u.state);return}M("recording"),x.resume(),n.disableLogs||console.log("Resumed recording.")}function S(p){postMessage(new FileReaderSync().readAsDataURL(p))}function E(p,T){if(!p)throw"Pass a callback function over getDataURL.";var D=T?T.blob:(x||{}).blob;if(!D){n.disableLogs||console.warn("Blob encoder did not finish its job yet."),setTimeout(function(){E(p,T)},1e3);return}if(typeof Worker<"u"&&!navigator.mozGetUserMedia){var l=L(S);l.onmessage=function(O){p(O.data)},l.postMessage(D)}else{var y=new FileReader;y.readAsDataURL(D),y.onload=function(O){p(O.target.result)}}function L(O){try{var N=R.createObjectURL(new Blob([O.toString(),"this.onmessage =  function (eee) {"+O.name+"(eee.data);}"],{type:"application/javascript"})),F=new Worker(N);return R.revokeObjectURL(N),F}catch{}}}function _(p){if(p=p||0,u.state==="paused"){setTimeout(function(){_(p)},1e3);return}if(u.state!=="stopped"){if(p>=u.recordingDuration){m(u.onRecordingStopped);return}p+=1e3,setTimeout(function(){_(p)},1e3)}}function M(p){u&&(u.state=p,typeof u.onStateChanged.call=="function"?u.onStateChanged.call(u,p):u.onStateChanged(p))}var A='It seems that recorder is destroyed or "startRecording" is not invoked for '+n.type+" recorder.";function C(){n.disableLogs!==!0&&console.warn(A)}var x,I={startRecording:g,stopRecording:m,pauseRecording:b,resumeRecording:f,initRecorder:v,setRecordingDuration:function(p,T){if(typeof p>"u")throw"recordingDuration is required.";if(typeof p!="number")throw"recordingDuration must be a number.";return u.recordingDuration=p,u.onRecordingStopped=T||function(){},{onRecordingStopped:function(D){u.onRecordingStopped=D}}},clearRecordedData:function(){if(!x){C();return}x.clearRecordedData(),n.disableLogs||console.log("Cleared old recorded data.")},getBlob:function(){if(!x){C();return}return x.blob},getDataURL:E,toURL:function(){if(!x){C();return}return R.createObjectURL(x.blob)},getInternalRecorder:function(){return x},save:function(p){if(!x){C();return}K(x.blob,p)},getFromDisk:function(p){if(!x){C();return}t.getFromDisk(n.type,p)},setAdvertisementArray:function(p){n.advertisement=[];for(var T=p.length,D=0;D<T;D++)n.advertisement.push({duration:D,image:p[D]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){u.state==="recording"&&!n.disableLogs&&console.warn("Stop an active recorder."),x&&typeof x.clearRecordedData=="function"&&x.clearRecordedData(),x=null,M("inactive"),u.blob=null},onStateChanged:function(p){n.disableLogs||console.log("Recorder state changed:",p)},state:"inactive",getState:function(){return u.state},destroy:function(){var p=n.disableLogs;n={disableLogs:!0},u.reset(),M("destroyed"),I=u=null,ye.AudioContextConstructor&&(ye.AudioContextConstructor.close(),ye.AudioContextConstructor=null),n.disableLogs=p,n.disableLogs||console.log("RecordRTC is destroyed.")},version:"5.6.2"};if(!this)return u=I,I;for(var j in I)this[j]=I[j];return u=this,I}t.version="5.6.2",e.exports=t,t.getFromDisk=function(d,n){if(!n)throw"callback is mandatory.";console.log("Getting recorded "+(d==="all"?"blobs":d+" blob ")+" from disk!"),pe.Fetch(function(u,g){d!=="all"&&g===d+"Blob"&&n&&n(u),d==="all"&&n&&n(u,g.replace("Blob",""))})},t.writeToDisk=function(d){console.log("Writing recorded blob(s) to disk!"),d=d||{},d.audio&&d.video&&d.gif?d.audio.getDataURL(function(n){d.video.getDataURL(function(u){d.gif.getDataURL(function(g){pe.Store({audioBlob:n,videoBlob:u,gifBlob:g})})})}):d.audio&&d.video?d.audio.getDataURL(function(n){d.video.getDataURL(function(u){pe.Store({audioBlob:n,videoBlob:u})})}):d.audio&&d.gif?d.audio.getDataURL(function(n){d.gif.getDataURL(function(u){pe.Store({audioBlob:n,gifBlob:u})})}):d.video&&d.gif?d.video.getDataURL(function(n){d.gif.getDataURL(function(u){pe.Store({videoBlob:n,gifBlob:u})})}):d.audio?d.audio.getDataURL(function(n){pe.Store({audioBlob:n})}):d.video?d.video.getDataURL(function(n){pe.Store({videoBlob:n})}):d.gif&&d.gif.getDataURL(function(n){pe.Store({gifBlob:n})})};/**
 * {@link RecordRTCConfiguration} is an inner/private helper for {@link RecordRTC}.
 * @summary It configures the 2nd parameter passed over {@link RecordRTC} and returns a valid "config" object.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTCConfiguration
 * @class
 * @example
 * var options = RecordRTCConfiguration(mediaStream, options);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {type:"video", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, getNativeBlob:true, etc.}
 */function r(d,n){return!n.recorderType&&!n.type&&(n.audio&&n.video?n.type="video":n.audio&&!n.video&&(n.type="audio")),n.recorderType&&!n.type&&(n.recorderType===st||n.recorderType===at||typeof Ge<"u"&&n.recorderType===Ge?n.type="video":n.recorderType===ut?n.type="gif":n.recorderType===Ue?n.type="audio":n.recorderType===ne&&(U(d,"audio").length&&U(d,"video").length||!U(d,"audio").length&&U(d,"video").length?n.type="video":U(d,"audio").length&&!U(d,"video").length&&(n.type="audio"))),typeof ne<"u"&&typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&(n.mimeType||(n.mimeType="video/webm"),n.type||(n.type=n.mimeType.split("/")[0]),n.bitsPerSecond),n.type||(n.mimeType&&(n.type=n.mimeType.split("/")[0]),n.type||(n.type="audio")),n}/**
 * {@link GetRecorderType} is an inner/private helper for {@link RecordRTC}.
 * @summary It returns best recorder-type available for your browser.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef GetRecorderType
 * @class
 * @example
 * var RecorderType = GetRecorderType(options);
 * var recorder = new RecorderType(options);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {type:"video", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}
 */function i(d,n){var u;return(G||P||B)&&(u=Ue),typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&!G&&(u=ne),n.type==="video"&&(G||B)&&(u=st,typeof Ge<"u"&&typeof ReadableStream<"u"&&(u=Ge)),n.type==="gif"&&(u=ut),n.type==="canvas"&&(u=at),be()&&u!==at&&u!==ut&&typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&(U(d,"video").length||U(d,"audio").length)&&(n.type==="audio"?typeof MediaRecorder.isTypeSupported=="function"&&MediaRecorder.isTypeSupported("audio/webm")&&(u=ne):typeof MediaRecorder.isTypeSupported=="function"&&MediaRecorder.isTypeSupported("video/webm")&&(u=ne)),d instanceof Array&&d.length&&(u=Er),n.recorderType&&(u=n.recorderType),!n.disableLogs&&u&&u.name&&console.log("Using recorderType:",u.name||u.constructor.name),!u&&de&&(u=ne),u}/**
 * MRecordRTC runs on top of {@link RecordRTC} to bring multiple recordings in a single place, by providing simple API.
 * @summary MRecordRTC stands for "Multiple-RecordRTC".
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef MRecordRTC
 * @class
 * @example
 * var recorder = new MRecordRTC();
 * recorder.addStream(MediaStream);
 * recorder.mediaType = {
 *     audio: true, // or StereoAudioRecorder or MediaStreamRecorder
 *     video: true, // or WhammyRecorder or MediaStreamRecorder or WebAssemblyRecorder or CanvasRecorder
 *     gif: true    // or GifRecorder
 * };
 * // mimeType is optional and should be set only in advance cases.
 * recorder.mimeType = {
 *     audio: 'audio/wav',
 *     video: 'video/webm',
 *     gif:   'image/gif'
 * };
 * recorder.startRecording();
 * @see For further information:
 * @see {@link https://github.com/muaz-khan/RecordRTC/tree/master/MRecordRTC|MRecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @requires {@link RecordRTC}
 */function o(d){this.addStream=function(n){n&&(d=n)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var n=this.mediaType,u,g=this.mimeType||{audio:null,video:null,gif:null};if(typeof n.audio!="function"&&be()&&!U(d,"audio").length&&(n.audio=!1),typeof n.video!="function"&&be()&&!U(d,"video").length&&(n.video=!1),typeof n.gif!="function"&&be()&&!U(d,"video").length&&(n.gif=!1),!n.audio&&!n.video&&!n.gif)throw"MediaStream must have either audio or video tracks.";if(n.audio&&(u=null,typeof n.audio=="function"&&(u=n.audio),this.audioRecorder=new t(d,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:u,mimeType:g.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),n.video||this.audioRecorder.startRecording()),n.video){u=null,typeof n.video=="function"&&(u=n.video);var v=d;if(be()&&n.audio&&typeof n.audio=="function"){var m=U(d,"video")[0];W?(v=new k,v.addTrack(m),u&&u===st&&(u=ne)):(v=new k,v.addTrack(m))}this.videoRecorder=new t(v,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:u,mimeType:g.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp,workerPath:this.workerPath,webAssemblyPath:this.webAssemblyPath,frameRate:this.frameRate,bitrate:this.bitrate}),n.audio||this.videoRecorder.startRecording()}if(n.audio&&n.video){var b=this,f=be()===!0;(n.audio instanceof Ue&&n.video||n.audio!==!0&&n.video!==!0&&n.audio!==n.video)&&(f=!1),f===!0?(b.audioRecorder=null,b.videoRecorder.startRecording()):b.videoRecorder.initRecorder(function(){b.audioRecorder.initRecorder(function(){b.videoRecorder.startRecording(),b.audioRecorder.startRecording()})})}n.gif&&(u=null,typeof n.gif=="function"&&(u=n.gif),this.gifRecorder=new t(d,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:u,mimeType:g.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(n){n=n||function(){},this.audioRecorder&&this.audioRecorder.stopRecording(function(u){n(u,"audio")}),this.videoRecorder&&this.videoRecorder.stopRecording(function(u){n(u,"video")}),this.gifRecorder&&this.gifRecorder.stopRecording(function(u){n(u,"gif")})},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(n){var u={};return this.audioRecorder&&(u.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(u.video=this.videoRecorder.getBlob()),this.gifRecorder&&(u.gif=this.gifRecorder.getBlob()),n&&n(u),u},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(n){this.getBlob(function(v){v.audio&&v.video?u(v.audio,function(m){u(v.video,function(b){n({audio:m,video:b})})}):v.audio?u(v.audio,function(m){n({audio:m})}):v.video&&u(v.video,function(m){n({video:m})})});function u(v,m){if(typeof Worker<"u"){var b=g(function(E){postMessage(new FileReaderSync().readAsDataURL(E))});b.onmessage=function(S){m(S.data)},b.postMessage(v)}else{var f=new FileReader;f.readAsDataURL(v),f.onload=function(S){m(S.target.result)}}}function g(v){var m=R.createObjectURL(new Blob([v.toString(),"this.onmessage =  function (eee) {"+v.name+"(eee.data);}"],{type:"application/javascript"})),b=new Worker(m),f;if(typeof R<"u")f=R;else if(typeof webkitURL<"u")f=webkitURL;else throw"Neither URL nor webkitURL detected.";return f.revokeObjectURL(m),b}},this.writeToDisk=function(){t.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(n){n=n||{audio:!0,video:!0,gif:!0},n.audio&&this.audioRecorder&&this.audioRecorder.save(typeof n.audio=="string"?n.audio:""),n.video&&this.videoRecorder&&this.videoRecorder.save(typeof n.video=="string"?n.video:""),n.gif&&this.gifRecorder&&this.gifRecorder.save(typeof n.gif=="string"?n.gif:"")}}o.getFromDisk=t.getFromDisk,o.writeToDisk=t.writeToDisk,typeof t<"u"&&(t.MRecordRTC=o);var a="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(function(d){d&&(typeof window<"u"||typeof q>"u"||(q.navigator={userAgent:a,getUserMedia:function(){}},q.console||(q.console={}),(typeof q.console.log>"u"||typeof q.console.error>"u")&&(q.console.error=q.console.log=q.console.log||function(){console.log(arguments)}),typeof document>"u"&&(d.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var n={getContext:function(){return n},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return n},d.HTMLVideoElement=function(){}),typeof location>"u"&&(d.location={protocol:"file:",href:"",hash:""}),typeof screen>"u"&&(d.screen={width:0,height:0}),typeof R>"u"&&(d.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),d.window=q))})(typeof q<"u"?q:null);var s=window.requestAnimationFrame;if(typeof s>"u"){if(typeof webkitRequestAnimationFrame<"u")s=webkitRequestAnimationFrame;else if(typeof mozRequestAnimationFrame<"u")s=mozRequestAnimationFrame;else if(typeof msRequestAnimationFrame<"u")s=msRequestAnimationFrame;else if(typeof s>"u"){var c=0;s=function(d,n){var u=new Date().getTime(),g=Math.max(0,16-(u-c)),v=setTimeout(function(){d(u+g)},g);return c=u+g,v}}}var h=window.cancelAnimationFrame;typeof h>"u"&&(typeof webkitCancelAnimationFrame<"u"?h=webkitCancelAnimationFrame:typeof mozCancelAnimationFrame<"u"?h=mozCancelAnimationFrame:typeof msCancelAnimationFrame<"u"?h=msCancelAnimationFrame:typeof h>"u"&&(h=function(d){clearTimeout(d)}));var w=window.AudioContext;typeof w>"u"&&(typeof webkitAudioContext<"u"&&(w=webkitAudioContext),typeof mozAudioContext<"u"&&(w=mozAudioContext));var R=window.URL;typeof R>"u"&&typeof webkitURL<"u"&&(R=webkitURL),typeof navigator<"u"&&typeof navigator.getUserMedia>"u"&&(typeof navigator.webkitGetUserMedia<"u"&&(navigator.getUserMedia=navigator.webkitGetUserMedia),typeof navigator.mozGetUserMedia<"u"&&(navigator.getUserMedia=navigator.mozGetUserMedia));var P=navigator.userAgent.indexOf("Edge")!==-1&&(!!navigator.msSaveBlob||!!navigator.msSaveOrOpenBlob),B=!!window.opera||navigator.userAgent.indexOf("OPR/")!==-1,W=navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(navigator.userAgent),G=!B&&!P&&!!navigator.webkitGetUserMedia||J()||navigator.userAgent.toLowerCase().indexOf("chrome/")!==-1,de=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);de&&!G&&navigator.userAgent.indexOf("CriOS")!==-1&&(de=!1,G=!0);var k=window.MediaStream;typeof k>"u"&&typeof webkitMediaStream<"u"&&(k=webkitMediaStream),typeof k<"u"&&typeof k.prototype.stop>"u"&&(k.prototype.stop=function(){this.getTracks().forEach(function(d){d.stop()})});function $(d){var n=1e3,u=["Bytes","KB","MB","GB","TB"];if(d===0)return"0 Bytes";var g=parseInt(Math.floor(Math.log(d)/Math.log(n)),10);return(d/Math.pow(n,g)).toPrecision(3)+" "+u[g]}function K(d,n){if(!d)throw"Blob object is required.";if(!d.type)try{d.type="video/webm"}catch{}var u=(d.type||"video/webm").split("/")[1];if(u.indexOf(";")!==-1&&(u=u.split(";")[0]),n&&n.indexOf(".")!==-1){var g=n.split(".");n=g[0],u=g[1]}var v=(n||Math.round(Math.random()*9999999999)+888888888)+"."+u;if(typeof navigator.msSaveOrOpenBlob<"u")return navigator.msSaveOrOpenBlob(d,v);if(typeof navigator.msSaveBlob<"u")return navigator.msSaveBlob(d,v);var m=document.createElement("a");m.href=R.createObjectURL(d),m.download=v,m.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(m),typeof m.click=="function"?m.click():(m.target="_blank",m.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),R.revokeObjectURL(m.href)}function J(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}function U(d,n){return!d||!d.getTracks?[]:d.getTracks().filter(function(u){return u.kind===(n||"audio")})}function ve(d,n){"srcObject"in n?n.srcObject=d:"mozSrcObject"in n?n.mozSrcObject=d:n.srcObject=d}function Ee(d,n){if(typeof EBML>"u")throw new Error("Please link: https://www.webrtc-experiment.com/EBML.js");var u=new EBML.Reader,g=new EBML.Decoder,v=EBML.tools,m=new FileReader;m.onload=function(b){var f=g.decode(this.result);f.forEach(function(M){u.read(M)}),u.stop();var S=v.makeMetadataSeekable(u.metadatas,u.duration,u.cues),E=this.result.slice(u.metadataSize),_=new Blob([S,E],{type:"video/webm"});n(_)},m.readAsArrayBuffer(d)}typeof t<"u"&&(t.invokeSaveAsDialog=K,t.getTracks=U,t.getSeekableBlob=Ee,t.bytesToSize=$,t.isElectron=J);/**
 * Storage is a standalone object used by {@link RecordRTC} to store reusable objects e.g. "new AudioContext".
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @example
 * Storage.AudioContext === webkitAudioContext
 * @property {webkitAudioContext} AudioContext - Keeps a reference to AudioContext object.
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var ye={};typeof w<"u"?ye.AudioContext=w:typeof webkitAudioContext<"u"&&(ye.AudioContext=webkitAudioContext),typeof t<"u"&&(t.Storage=ye);function be(){if(W||de||P)return!0;var d=navigator.userAgent,n=""+parseFloat(navigator.appVersion),u=parseInt(navigator.appVersion,10),g,v;return(G||B)&&(g=d.indexOf("Chrome"),n=d.substring(g+7)),(v=n.indexOf(";"))!==-1&&(n=n.substring(0,v)),(v=n.indexOf(" "))!==-1&&(n=n.substring(0,v)),u=parseInt(""+n,10),isNaN(u)&&(n=""+parseFloat(navigator.appVersion),u=parseInt(navigator.appVersion,10)),u>=49}/**
 * MediaStreamRecorder is an abstraction layer for {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}. It is used by {@link RecordRTC} to record MediaStream(s) in both Chrome and Firefox.
 * @summary Runs top over {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://github.com/muaz-khan|Muaz Khan}
 * @typedef MediaStreamRecorder
 * @class
 * @example
 * var config = {
 *     mimeType: 'video/webm', // vp8, vp9, h264, mkv, opus/vorbis
 *     audioBitsPerSecond : 256 * 8 * 1024,
 *     videoBitsPerSecond : 256 * 8 * 1024,
 *     bitsPerSecond: 256 * 8 * 1024,  // if this is provided, skip above two
 *     checkForInactiveTracks: true,
 *     timeSlice: 1000, // concatenate intervals based blobs
 *     ondataavailable: function() {} // get intervals based blobs
 * }
 * var recorder = new MediaStreamRecorder(mediaStream, config);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 *
 *     // or
 *     var blob = recorder.blob;
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {disableLogs:true, initCallback: function, mimeType: "video/webm", timeSlice: 1000}
 * @throws Will throw an error if first argument "MediaStream" is missing. Also throws error if "MediaRecorder API" are not supported by the browser.
 */function ne(d,n){var _=this;if(typeof d>"u")throw'First argument "MediaStream" is required.';if(typeof MediaRecorder>"u")throw"Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";if(n=n||{mimeType:"video/webm"},n.type==="audio"){if(U(d,"video").length&&U(d,"audio").length){var u;navigator.mozGetUserMedia?(u=new k,u.addTrack(U(d,"audio")[0])):u=new k(U(d,"audio")),d=u}(!n.mimeType||n.mimeType.toString().toLowerCase().indexOf("audio")===-1)&&(n.mimeType=G?"audio/webm":"audio/ogg"),n.mimeType&&n.mimeType.toString().toLowerCase()!=="audio/ogg"&&navigator.mozGetUserMedia&&(n.mimeType="audio/ogg")}var g=[];this.getArrayOfBlobs=function(){return g},this.record=function(){_.blob=null,_.clearRecordedData(),_.timestamps=[],E=[],g=[];var M=n;n.disableLogs||console.log("Passing following config over MediaRecorder API.",M),f&&(f=null),G&&!be()&&(M="video/vp8"),typeof MediaRecorder.isTypeSupported=="function"&&M.mimeType&&(MediaRecorder.isTypeSupported(M.mimeType)||(n.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",M.mimeType),M.mimeType=n.type==="audio"?"audio/webm":"video/webm"));try{f=new MediaRecorder(d,M),n.mimeType=M.mimeType}catch{f=new MediaRecorder(d)}M.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in f&&f.canRecordMimeType(M.mimeType)===!1&&(n.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",M.mimeType)),f.ondataavailable=function(A){if(A.data&&E.push("ondataavailable: "+$(A.data.size)),typeof n.timeSlice=="number"){if(A.data&&A.data.size&&(g.push(A.data),v(),typeof n.ondataavailable=="function")){var C=n.getNativeBlob?A.data:new Blob([A.data],{type:m(M)});n.ondataavailable(C)}return}if(!A.data||!A.data.size||A.data.size<100||_.blob){_.recordingCallback&&(_.recordingCallback(new Blob([],{type:m(M)})),_.recordingCallback=null);return}_.blob=n.getNativeBlob?A.data:new Blob([A.data],{type:m(M)}),_.recordingCallback&&(_.recordingCallback(_.blob),_.recordingCallback=null)},f.onstart=function(){E.push("started")},f.onpause=function(){E.push("paused")},f.onresume=function(){E.push("resumed")},f.onstop=function(){E.push("stopped")},f.onerror=function(A){A&&(A.name||(A.name="UnknownError"),E.push("error: "+A),n.disableLogs||(A.name.toString().toLowerCase().indexOf("invalidstate")!==-1?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",A):A.name.toString().toLowerCase().indexOf("notsupported")!==-1?console.error("MIME type (",M.mimeType,") is not supported.",A):A.name.toString().toLowerCase().indexOf("security")!==-1?console.error("MediaRecorder security error",A):A.name==="OutOfMemory"?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",A):A.name==="IllegalStreamModification"?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",A):A.name==="OtherRecordingError"?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",A):A.name==="GenericError"?console.error("The UA cannot provide the codec or recording option that has been requested.",A):console.error("MediaRecorder Error",A)),function(C){if(!_.manuallyStopped&&f&&f.state==="inactive"){delete n.timeslice,f.start(10*60*1e3);return}setTimeout(C,1e3)}(),f.state!=="inactive"&&f.state!=="stopped"&&f.stop())},typeof n.timeSlice=="number"?(v(),f.start(n.timeSlice)):f.start(36e5),n.initCallback&&n.initCallback()},this.timestamps=[];function v(){_.timestamps.push(new Date().getTime()),typeof n.onTimeStamp=="function"&&n.onTimeStamp(_.timestamps[_.timestamps.length-1],_.timestamps)}function m(M){return f&&f.mimeType?f.mimeType:M.mimeType||"video/webm"}this.stop=function(M){M=M||function(){},_.manuallyStopped=!0,f&&(this.recordingCallback=M,f.state==="recording"&&f.stop(),typeof n.timeSlice=="number"&&setTimeout(function(){_.blob=new Blob(g,{type:m(n)}),_.recordingCallback(_.blob)},100))},this.pause=function(){f&&f.state==="recording"&&f.pause()},this.resume=function(){f&&f.state==="paused"&&f.resume()},this.clearRecordedData=function(){f&&f.state==="recording"&&_.stop(b),b()};function b(){g=[],f=null,_.timestamps=[]}var f;this.getInternalRecorder=function(){return f};function S(){if("active"in d){if(!d.active)return!1}else if("ended"in d&&d.ended)return!1;return!0}this.blob=null,this.getState=function(){return f&&f.state||"inactive"};var E=[];this.getAllStates=function(){return E},typeof n.checkForInactiveTracks>"u"&&(n.checkForInactiveTracks=!1);var _=this;(function M(){if(!(!f||n.checkForInactiveTracks===!1)){if(S()===!1){n.disableLogs||console.log("MediaStream seems stopped."),_.stop();return}setTimeout(M,1e3)}})(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}typeof t<"u"&&(t.MediaStreamRecorder=ne);/**
 * StereoAudioRecorder is a standalone class used by {@link RecordRTC} to bring "stereo" audio-recording in chrome.
 * @summary JavaScript standalone object for stereo audio recording.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef StereoAudioRecorder
 * @class
 * @example
 * var recorder = new StereoAudioRecorder(MediaStream, {
 *     sampleRate: 44100,
 *     bufferSize: 4096
 * });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {sampleRate: 44100, bufferSize: 4096, numberOfAudioChannels: 1, etc.}
 */function Ue(d,n){if(!U(d,"audio").length)throw"Your stream has no audio tracks.";n=n||{};var u=this,g=[],v=[],m=!1,b=0,f,S=2,E=n.desiredSampRate;n.leftChannel===!0&&(S=1),n.numberOfAudioChannels===1&&(S=1),(!S||S<1)&&(S=2),n.disableLogs||console.log("StereoAudioRecorder is set to record number of channels: "+S),typeof n.checkForInactiveTracks>"u"&&(n.checkForInactiveTracks=!0);function _(){if(n.checkForInactiveTracks===!1)return!0;if("active"in d){if(!d.active)return!1}else if("ended"in d&&d.ended)return!1;return!0}this.record=function(){if(_()===!1)throw"Please make sure MediaStream is active.";D(),y=T=!1,m=!0,typeof n.timeSlice<"u"&&N()};function M(F,Z){function Q(Y,He){var ce=Y.numberOfAudioChannels,ie=Y.leftBuffers.slice(0),_e=Y.rightBuffers.slice(0),oe=Y.sampleRate,xe=Y.internalInterleavedLength,fe=Y.desiredSampRate;ce===2&&(ie=kt(ie,xe),_e=kt(_e,xe),fe&&(ie=Je(ie,fe,oe),_e=Je(_e,fe,oe))),ce===1&&(ie=kt(ie,xe),fe&&(ie=Je(ie,fe,oe))),fe&&(oe=fe);function Je(X,ge,ae){var se=Math.round(X.length*(ge/ae)),te=[],Re=Number((X.length-1)/(se-1));te[0]=X[0];for(var Le=1;Le<se-1;Le++){var It=Le*Re,kr=Number(Math.floor(It)).toFixed(),pi=Number(Math.ceil(It)).toFixed(),gi=It-kr;te[Le]=di(X[kr],X[pi],gi)}return te[se-1]=X[X.length-1],te}function di(X,ge,ae){return X+(ge-X)*ae}function kt(X,ge){for(var ae=new Float64Array(ge),se=0,te=X.length,Re=0;Re<te;Re++){var Le=X[Re];ae.set(Le,se),se+=Le.length}return ae}function ci(X,ge){for(var ae=X.length+ge.length,se=new Float64Array(ae),te=0,Re=0;Re<ae;)se[Re++]=X[te],se[Re++]=ge[te],te++;return se}function dt(X,ge,ae){for(var se=ae.length,te=0;te<se;te++)X.setUint8(ge+te,ae.charCodeAt(te))}var ct;ce===2&&(ct=ci(ie,_e)),ce===1&&(ct=ie);var ft=ct.length,fi=44+ft*2,Ot=new ArrayBuffer(fi),ee=new DataView(Ot);dt(ee,0,"RIFF"),ee.setUint32(4,36+ft*2,!0),dt(ee,8,"WAVE"),dt(ee,12,"fmt "),ee.setUint32(16,16,!0),ee.setUint16(20,1,!0),ee.setUint16(22,ce,!0),ee.setUint32(24,oe,!0),ee.setUint32(28,oe*ce*2,!0),ee.setUint16(32,ce*2,!0),ee.setUint16(34,16,!0),dt(ee,36,"data"),ee.setUint32(40,ft*2,!0);for(var li=ft,Lr=44,hi=1,Dt=0;Dt<li;Dt++)ee.setInt16(Lr,ct[Dt]*(32767*hi),!0),Lr+=2;if(He)return He({buffer:Ot,view:ee});postMessage({buffer:Ot,view:ee})}if(F.noWorker){Q(F,function(Y){Z(Y.buffer,Y.view)});return}var we=A(Q);we.onmessage=function(Y){Z(Y.data.buffer,Y.data.view),R.revokeObjectURL(we.workerURL),we.terminate()},we.postMessage(F)}function A(F){var Z=R.createObjectURL(new Blob([F.toString(),";this.onmessage =  function (eee) {"+F.name+"(eee.data);}"],{type:"application/javascript"})),Q=new Worker(Z);return Q.workerURL=Z,Q}this.stop=function(F){F=F||function(){},m=!1,M({desiredSampRate:E,sampleRate:p,numberOfAudioChannels:S,internalInterleavedLength:b,leftBuffers:g,rightBuffers:S===1?[]:v,noWorker:n.noWorker},function(Z,Q){u.blob=new Blob([Q],{type:"audio/wav"}),u.buffer=new ArrayBuffer(Q.buffer.byteLength),u.view=Q,u.sampleRate=E||p,u.bufferSize=j,u.length=b,y=!1,F&&F(u.blob)})},typeof t.Storage>"u"&&(t.Storage={AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext}),(!t.Storage.AudioContextConstructor||t.Storage.AudioContextConstructor.state==="closed")&&(t.Storage.AudioContextConstructor=new t.Storage.AudioContext);var C=t.Storage.AudioContextConstructor,x=C.createMediaStreamSource(d),I=[0,256,512,1024,2048,4096,8192,16384],j=typeof n.bufferSize>"u"?4096:n.bufferSize;if(I.indexOf(j)===-1&&(n.disableLogs||console.log("Legal values for buffer-size are "+JSON.stringify(I,null,"	"))),C.createJavaScriptNode)f=C.createJavaScriptNode(j,S,S);else if(C.createScriptProcessor)f=C.createScriptProcessor(j,S,S);else throw"WebAudio API has no support on this browser.";x.connect(f),n.bufferSize||(j=f.bufferSize);var p=typeof n.sampleRate<"u"?n.sampleRate:C.sampleRate||44100;(p<22050||p>96e3)&&(n.disableLogs||console.log("sample-rate must be under range 22050 and 96000.")),n.disableLogs||n.desiredSampRate&&console.log("Desired sample-rate: "+n.desiredSampRate);var T=!1;this.pause=function(){T=!0},this.resume=function(){if(_()===!1)throw"Please make sure MediaStream is active.";if(!m){n.disableLogs||console.log("Seems recording has been restarted."),this.record();return}T=!1},this.clearRecordedData=function(){n.checkForInactiveTracks=!1,m&&this.stop(l),l()};function D(){g=[],v=[],b=0,y=!1,m=!1,T=!1,C=null,u.leftchannel=g,u.rightchannel=v,u.numberOfAudioChannels=S,u.desiredSampRate=E,u.sampleRate=p,u.recordingLength=b,O={left:[],right:[],recordingLength:0}}function l(){f&&(f.onaudioprocess=null,f.disconnect(),f=null),x&&(x.disconnect(),x=null),D()}this.name="StereoAudioRecorder",this.toString=function(){return this.name};var y=!1;function L(F){if(!T){if(_()===!1&&(n.disableLogs||console.log("MediaStream seems stopped."),f.disconnect(),m=!1),!m){x&&(x.disconnect(),x=null);return}y||(y=!0,n.onAudioProcessStarted&&n.onAudioProcessStarted(),n.initCallback&&n.initCallback());var Z=F.inputBuffer.getChannelData(0),Q=new Float32Array(Z);if(g.push(Q),S===2){var we=F.inputBuffer.getChannelData(1),Y=new Float32Array(we);v.push(Y)}b+=j,u.recordingLength=b,typeof n.timeSlice<"u"&&(O.recordingLength+=j,O.left.push(Q),S===2&&O.right.push(Y))}}f.onaudioprocess=L,C.createMediaStreamDestination?f.connect(C.createMediaStreamDestination()):f.connect(C.destination),this.leftchannel=g,this.rightchannel=v,this.numberOfAudioChannels=S,this.desiredSampRate=E,this.sampleRate=p,u.recordingLength=b;var O={left:[],right:[],recordingLength:0};function N(){!m||typeof n.ondataavailable!="function"||typeof n.timeSlice>"u"||(O.left.length?(M({desiredSampRate:E,sampleRate:p,numberOfAudioChannels:S,internalInterleavedLength:O.recordingLength,leftBuffers:O.left,rightBuffers:S===1?[]:O.right},function(F,Z){var Q=new Blob([Z],{type:"audio/wav"});n.ondataavailable(Q),setTimeout(N,n.timeSlice)}),O={left:[],right:[],recordingLength:0}):setTimeout(N,n.timeSlice))}}typeof t<"u"&&(t.StereoAudioRecorder=Ue);/**
 * CanvasRecorder is a standalone class used by {@link RecordRTC} to bring HTML5-Canvas recording into video WebM. It uses HTML2Canvas library and runs top over {@link Whammy}.
 * @summary HTML2Canvas recording into video WebM.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef CanvasRecorder
 * @class
 * @example
 * var recorder = new CanvasRecorder(htmlElement, { disableLogs: true, useWhammyRecorder: true });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {HTMLElement} htmlElement - querySelector/getElementById/getElementsByTagName[0]/etc.
 * @param {object} config - {disableLogs:true, initCallback: function}
 */function at(d,n){if(typeof html2canvas>"u")throw"Please link: https://www.webrtc-experiment.com/screenshot.js";n=n||{},n.frameInterval||(n.frameInterval=10);var u=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(I){I in document.createElement("canvas")&&(u=!0)});var g=(!!window.webkitRTCPeerConnection||!!window.webkitGetUserMedia)&&!!window.chrome,v=50,m=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);g&&m&&m[2]&&(v=parseInt(m[2],10)),g&&v<52&&(u=!1),n.useWhammyRecorder&&(u=!1);var b,f;if(u)if(n.disableLogs||console.log("Your browser supports both MediRecorder API and canvas.captureStream!"),d instanceof HTMLCanvasElement)b=d;else if(d instanceof CanvasRenderingContext2D)b=d.canvas;else throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";else navigator.mozGetUserMedia&&(n.disableLogs||console.error("Canvas recording is NOT supported in Firefox."));var S;this.record=function(){if(S=!0,u&&!n.useWhammyRecorder){var I;"captureStream"in b?I=b.captureStream(25):"mozCaptureStream"in b?I=b.mozCaptureStream(25):"webkitCaptureStream"in b&&(I=b.webkitCaptureStream(25));try{var j=new k;j.addTrack(U(I,"video")[0]),I=j}catch{}if(!I)throw"captureStream API are NOT available.";f=new ne(I,{mimeType:n.mimeType||"video/webm"}),f.record()}else x.frames=[],C=new Date().getTime(),A();n.initCallback&&n.initCallback()},this.getWebPImages=function(I){if(d.nodeName.toLowerCase()!=="canvas"){I();return}var j=x.frames.length;x.frames.forEach(function(p,T){var D=j-T;n.disableLogs||console.log(D+"/"+j+" frames remaining"),n.onEncodingCallback&&n.onEncodingCallback(D,j);var l=p.image.toDataURL("image/webp",1);x.frames[T].image=l}),n.disableLogs||console.log("Generating WebM"),I()},this.stop=function(I){S=!1;var j=this;if(u&&f){f.stop(I);return}this.getWebPImages(function(){x.compile(function(p){n.disableLogs||console.log("Recording finished!"),j.blob=p,j.blob.forEach&&(j.blob=new Blob([],{type:"video/webm"})),I&&I(j.blob),x.frames=[]})})};var E=!1;this.pause=function(){if(E=!0,f instanceof ne){f.pause();return}},this.resume=function(){if(E=!1,f instanceof ne){f.resume();return}S||this.record()},this.clearRecordedData=function(){S&&this.stop(_),_()};function _(){x.frames=[],S=!1,E=!1}this.name="CanvasRecorder",this.toString=function(){return this.name};function M(){var I=document.createElement("canvas"),j=I.getContext("2d");return I.width=d.width,I.height=d.height,j.drawImage(d,0,0),I}function A(){if(E)return C=new Date().getTime(),setTimeout(A,500);if(d.nodeName.toLowerCase()==="canvas"){var I=new Date().getTime()-C;C=new Date().getTime(),x.frames.push({image:M(),duration:I}),S&&setTimeout(A,n.frameInterval);return}html2canvas(d,{grabMouse:typeof n.showMousePointer>"u"||n.showMousePointer,onrendered:function(j){var p=new Date().getTime()-C;if(!p)return setTimeout(A,n.frameInterval);C=new Date().getTime(),x.frames.push({image:j.toDataURL("image/webp",1),duration:p}),S&&setTimeout(A,n.frameInterval)}})}var C=new Date().getTime(),x=new Lt.Video(100)}typeof t<"u"&&(t.CanvasRecorder=at);/**
 * WhammyRecorder is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It runs top over {@link Whammy}.
 * @summary Video recording feature in Chrome.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef WhammyRecorder
 * @class
 * @example
 * var recorder = new WhammyRecorder(mediaStream);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {disableLogs: true, initCallback: function, video: HTMLVideoElement, etc.}
 */function st(d,n){n=n||{},n.frameInterval||(n.frameInterval=10),n.disableLogs||console.log("Using frames-interval:",n.frameInterval),this.record=function(){n.width||(n.width=320),n.height||(n.height=240),n.video||(n.video={width:n.width,height:n.height}),n.canvas||(n.canvas={width:n.width,height:n.height}),S.width=n.canvas.width||320,S.height=n.canvas.height||240,E=S.getContext("2d"),n.video&&n.video instanceof HTMLVideoElement?(_=n.video.cloneNode(),n.initCallback&&n.initCallback()):(_=document.createElement("video"),ve(d,_),_.onloadedmetadata=function(){n.initCallback&&n.initCallback()},_.width=n.video.width,_.height=n.video.height),_.muted=!0,_.play(),M=new Date().getTime(),A=new Lt.Video,n.disableLogs||(console.log("canvas resolutions",S.width,"*",S.height),console.log("video width/height",_.width||S.width,"*",_.height||S.height)),u(n.frameInterval)};function u(C){C=typeof C<"u"?C:10;var x=new Date().getTime()-M;if(!x)return setTimeout(u,C,C);if(b)return M=new Date().getTime(),setTimeout(u,100);M=new Date().getTime(),_.paused&&_.play(),E.drawImage(_,0,0,S.width,S.height),A.frames.push({duration:x,image:S.toDataURL("image/webp")}),m||setTimeout(u,C,C)}function g(C){var x=-1,I=C.length;(function j(){if(x++,x===I){C.callback();return}setTimeout(function(){C.functionToLoop(j,x)},1)})()}function v(C,x,I,j,p){var T=document.createElement("canvas");T.width=S.width,T.height=S.height;var D=T.getContext("2d"),l=[],y=C.length,L={r:0,g:0,b:0},O=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),N=0,F=0,Z=!1;g({length:y,functionToLoop:function(Q,we){var Y,He,ce,ie=function(){!Z&&ce-Y<=ce*F||(Z=!0,l.push(C[we])),Q()};if(Z)ie();else{var _e=new Image;_e.onload=function(){D.drawImage(_e,0,0,S.width,S.height);var oe=D.getImageData(0,0,S.width,S.height);Y=0,He=oe.data.length,ce=oe.data.length/4;for(var xe=0;xe<He;xe+=4){var fe={r:oe.data[xe],g:oe.data[xe+1],b:oe.data[xe+2]},Je=Math.sqrt(Math.pow(fe.r-L.r,2)+Math.pow(fe.g-L.g,2)+Math.pow(fe.b-L.b,2));Je<=O*N&&Y++}ie()},_e.src=C[we].image}},callback:function(){l=l.concat(C.slice(y)),l.length<=0&&l.push(C[C.length-1]),p(l)}})}var m=!1;this.stop=function(C){C=C||function(){},m=!0;var x=this;setTimeout(function(){v(A.frames,-1,null,null,function(I){A.frames=I,n.advertisement&&n.advertisement.length&&(A.frames=n.advertisement.concat(A.frames)),A.compile(function(j){x.blob=j,x.blob.forEach&&(x.blob=new Blob([],{type:"video/webm"})),C&&C(x.blob)})})},10)};var b=!1;this.pause=function(){b=!0},this.resume=function(){b=!1,m&&this.record()},this.clearRecordedData=function(){m||this.stop(f),f()};function f(){A.frames=[],m=!0,b=!1}this.name="WhammyRecorder",this.toString=function(){return this.name};var S=document.createElement("canvas"),E=S.getContext("2d"),_,M,A}typeof t<"u"&&(t.WhammyRecorder=st);/**
 * Whammy is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It is written by {@link https://github.com/antimatter15|antimatter15}
 * @summary A real time javascript webm encoder based on a canvas hack.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef Whammy
 * @class
 * @example
 * var recorder = new Whammy().Video(15);
 * recorder.add(context || canvas || dataURL);
 * var output = recorder.compile();
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var Lt=function(){function d(g){this.frames=[],this.duration=g||1,this.quality=.8}d.prototype.add=function(g,v){if("canvas"in g&&(g=g.canvas),"toDataURL"in g&&(g=g.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/ig.test(g))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:g,duration:v||this.duration})};function n(g){var v=R.createObjectURL(new Blob([g.toString(),"this.onmessage =  function (eee) {"+g.name+"(eee.data);}"],{type:"application/javascript"})),m=new Worker(v);return R.revokeObjectURL(v),m}function u(g){function v(p){var T=b(p);if(!T)return[];for(var D=3e4,l=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:I(T.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:T.width,id:176},{data:T.height,id:186}]}]}]}]}],y=0,L=0;y<p.length;){var O=[],N=0;do O.push(p[y]),N+=p[y].duration,y++;while(y<p.length&&N<D);var F=0,Z={id:524531317,data:m(L,F,O)};l[1].data.push(Z),L+=N}return _(l)}function m(p,T,D){return[{data:p,id:231}].concat(D.map(function(l){var y=M({frame:l.data.slice(4),trackNum:1,timecode:Math.round(T)});return T+=l.duration,{data:y,id:163}}))}function b(p){if(!p[0]){postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."});return}for(var T=p[0].width,D=p[0].height,l=p[0].duration,y=1;y<p.length;y++)l+=p[y].duration;return{duration:l,width:T,height:D}}function f(p){for(var T=[];p>0;)T.push(p&255),p=p>>8;return new Uint8Array(T.reverse())}function S(p){return new Uint8Array(p.split("").map(function(T){return T.charCodeAt(0)}))}function E(p){var T=[],D=p.length%8?new Array(9-p.length%8).join("0"):"";p=D+p;for(var l=0;l<p.length;l+=8)T.push(parseInt(p.substr(l,8),2));return new Uint8Array(T)}function _(p){for(var T=[],D=0;D<p.length;D++){var l=p[D].data;typeof l=="object"&&(l=_(l)),typeof l=="number"&&(l=E(l.toString(2))),typeof l=="string"&&(l=S(l));var y=l.size||l.byteLength||l.length,L=Math.ceil(Math.ceil(Math.log(y)/Math.log(2))/8),O=y.toString(2),N=new Array(L*7+7+1-O.length).join("0")+O,F=new Array(L).join("0")+"1"+N;T.push(f(p[D].id)),T.push(E(F)),T.push(l)}return new Blob(T,{type:"video/webm"})}function M(p){var T=0;T|=128;var D=[p.trackNum|128,p.timecode>>8,p.timecode&255,T].map(function(l){return String.fromCharCode(l)}).join("")+p.frame;return D}function A(p){for(var T=p.RIFF[0].WEBP[0],D=T.indexOf("*"),l=0,y=[];l<4;l++)y[l]=T.charCodeAt(D+3+l);var L,O,N;return N=y[1]<<8|y[0],L=N&16383,N=y[3]<<8|y[2],O=N&16383,{width:L,height:O,data:T,riff:p}}function C(p,T){return parseInt(p.substr(T+4,4).split("").map(function(D){var l=D.charCodeAt(0).toString(2);return new Array(8-l.length+1).join("0")+l}).join(""),2)}function x(p){for(var T=0,D={};T<p.length;){var l=p.substr(T,4),y=C(p,T),L=p.substr(T+4+4,y);T+=8+y,D[l]=D[l]||[],l==="RIFF"||l==="LIST"?D[l].push(x(L)):D[l].push(L)}return D}function I(p){return[].slice.call(new Uint8Array(new Float64Array([p]).buffer),0).map(function(T){return String.fromCharCode(T)}).reverse().join("")}var j=new v(g.map(function(p){var T=A(x(atob(p.image.slice(23))));return T.duration=p.duration,T}));postMessage(j)}return d.prototype.compile=function(g){var v=n(u);v.onmessage=function(m){if(m.data.error){console.error(m.data.error);return}g(m.data)},v.postMessage(this.frames)},{Video:d}}();typeof t<"u"&&(t.Whammy=Lt);/**
 * DiskStorage is a standalone object used by {@link RecordRTC} to store recorded blobs in IndexedDB storage.
 * @summary Writing blobs into IndexedDB.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @example
 * DiskStorage.Store({
 *     audioBlob: yourAudioBlob,
 *     videoBlob: yourVideoBlob,
 *     gifBlob  : yourGifBlob
 * });
 * DiskStorage.Fetch(function(dataURL, type) {
 *     if(type === 'audioBlob') { }
 *     if(type === 'videoBlob') { }
 *     if(type === 'gifBlob')   { }
 * });
 * // DiskStorage.dataStoreName = 'recordRTC';
 * // DiskStorage.onError = function(error) { };
 * @property {function} init - This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.
 * @property {function} Fetch - This method fetches stored blobs from IndexedDB.
 * @property {function} Store - This method stores blobs in IndexedDB.
 * @property {function} onError - This function is invoked for any known/unknown error.
 * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var pe={init:function(){var d=this;if(typeof indexedDB>"u"||typeof indexedDB.open>"u"){console.error("IndexedDB API are not available in this browser.");return}var n=1,u=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),g,v=indexedDB.open(u,n);function m(f){f.createObjectStore(d.dataStoreName)}function b(){var f=g.transaction([d.dataStoreName],"readwrite");d.videoBlob&&f.objectStore(d.dataStoreName).put(d.videoBlob,"videoBlob"),d.gifBlob&&f.objectStore(d.dataStoreName).put(d.gifBlob,"gifBlob"),d.audioBlob&&f.objectStore(d.dataStoreName).put(d.audioBlob,"audioBlob");function S(E){f.objectStore(d.dataStoreName).get(E).onsuccess=function(_){d.callback&&d.callback(_.target.result,E)}}S("audioBlob"),S("videoBlob"),S("gifBlob")}v.onerror=d.onError,v.onsuccess=function(){if(g=v.result,g.onerror=d.onError,g.setVersion)if(g.version!==n){var f=g.setVersion(n);f.onsuccess=function(){m(g),b()}}else b();else b()},v.onupgradeneeded=function(f){m(f.target.result)}},Fetch:function(d){return this.callback=d,this.init(),this},Store:function(d){return this.audioBlob=d.audioBlob,this.videoBlob=d.videoBlob,this.gifBlob=d.gifBlob,this.init(),this},onError:function(d){console.error(JSON.stringify(d,null,"	"))},dataStoreName:"recordRTC",dbName:null};typeof t<"u"&&(t.DiskStorage=pe);/**
 * GifRecorder is standalone calss used by {@link RecordRTC} to record video or canvas into animated gif.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef GifRecorder
 * @class
 * @example
 * var recorder = new GifRecorder(mediaStream || canvas || context, { onGifPreview: function, onGifRecordingStarted: function, width: 1280, height: 720, frameRate: 200, quality: 10 });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     img.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object or HTMLCanvasElement or CanvasRenderingContext2D.
 * @param {object} config - {disableLogs:true, initCallback: function, width: 320, height: 240, frameRate: 200, quality: 10}
 */function ut(d,n){if(typeof GIFEncoder>"u"){var u=document.createElement("script");u.src="https://www.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(u)}n=n||{};var g=d instanceof CanvasRenderingContext2D||d instanceof HTMLCanvasElement;this.record=function(){if(typeof GIFEncoder>"u"){setTimeout(C.record,1e3);return}if(!S){setTimeout(C.record,1e3);return}g||(n.width||(n.width=E.offsetWidth||320),n.height||(n.height=E.offsetHeight||240),n.video||(n.video={width:n.width,height:n.height}),n.canvas||(n.canvas={width:n.width,height:n.height}),b.width=n.canvas.width||320,b.height=n.canvas.height||240,E.width=n.video.width||320,E.height=n.video.height||240),A=new GIFEncoder,A.setRepeat(0),A.setDelay(n.frameRate||200),A.setQuality(n.quality||10),A.start(),typeof n.onGifRecordingStarted=="function"&&n.onGifRecordingStarted();function x(I){if(C.clearedRecordedData!==!0){if(v)return setTimeout(function(){x(I)},100);_=s(x),typeof M===void 0&&(M=I),!(I-M<90)&&(!g&&E.paused&&E.play(),g||f.drawImage(E,0,0,b.width,b.height),n.onGifPreview&&n.onGifPreview(b.toDataURL("image/png")),A.addFrame(f),M=I)}}_=s(x),n.initCallback&&n.initCallback()},this.stop=function(x){x=x||function(){},_&&h(_),this.blob=new Blob([new Uint8Array(A.stream().bin)],{type:"image/gif"}),x(this.blob),A.stream().bin=[]};var v=!1;this.pause=function(){v=!0},this.resume=function(){v=!1},this.clearRecordedData=function(){C.clearedRecordedData=!0,m()};function m(){A&&(A.stream().bin=[])}this.name="GifRecorder",this.toString=function(){return this.name};var b=document.createElement("canvas"),f=b.getContext("2d");g&&(d instanceof CanvasRenderingContext2D?(f=d,b=f.canvas):d instanceof HTMLCanvasElement&&(f=d.getContext("2d"),b=d));var S=!0;if(!g){var E=document.createElement("video");E.muted=!0,E.autoplay=!0,E.playsInline=!0,S=!1,E.onloadedmetadata=function(){S=!0},ve(d,E),E.play()}var _=null,M,A,C=this}typeof t<"u"&&(t.GifRecorder=ut);function Mr(d,n){var u="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(function(l){typeof t<"u"||l&&(typeof window<"u"||typeof q>"u"||(q.navigator={userAgent:u,getUserMedia:function(){}},q.console||(q.console={}),(typeof q.console.log>"u"||typeof q.console.error>"u")&&(q.console.error=q.console.log=q.console.log||function(){console.log(arguments)}),typeof document>"u"&&(l.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var y={getContext:function(){return y},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return y},l.HTMLVideoElement=function(){}),typeof location>"u"&&(l.location={protocol:"file:",href:"",hash:""}),typeof screen>"u"&&(l.screen={width:0,height:0}),typeof E>"u"&&(l.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),l.window=q))})(typeof q<"u"?q:null),n=n||"multi-streams-mixer";var g=[],v=!1,m=document.createElement("canvas"),b=m.getContext("2d");m.style.opacity=0,m.style.position="absolute",m.style.zIndex=-1,m.style.top="-1000em",m.style.left="-1000em",m.className=n,(document.body||document.documentElement).appendChild(m),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var f=this,S=window.AudioContext;typeof S>"u"&&(typeof webkitAudioContext<"u"&&(S=webkitAudioContext),typeof mozAudioContext<"u"&&(S=mozAudioContext));var E=window.URL;typeof E>"u"&&typeof webkitURL<"u"&&(E=webkitURL),typeof navigator<"u"&&typeof navigator.getUserMedia>"u"&&(typeof navigator.webkitGetUserMedia<"u"&&(navigator.getUserMedia=navigator.webkitGetUserMedia),typeof navigator.mozGetUserMedia<"u"&&(navigator.getUserMedia=navigator.mozGetUserMedia));var _=window.MediaStream;typeof _>"u"&&typeof webkitMediaStream<"u"&&(_=webkitMediaStream),typeof _<"u"&&typeof _.prototype.stop>"u"&&(_.prototype.stop=function(){this.getTracks().forEach(function(l){l.stop()})});var M={};typeof S<"u"?M.AudioContext=S:typeof webkitAudioContext<"u"&&(M.AudioContext=webkitAudioContext);function A(l,y){"srcObject"in y?y.srcObject=l:"mozSrcObject"in y?y.mozSrcObject=l:y.srcObject=l}this.startDrawingFrames=function(){C()};function C(){if(!v){var l=g.length,y=!1,L=[];if(g.forEach(function(N){N.stream||(N.stream={}),N.stream.fullcanvas?y=N:L.push(N)}),y)m.width=y.stream.width,m.height=y.stream.height;else if(L.length){m.width=l>1?L[0].width*2:L[0].width;var O=1;(l===3||l===4)&&(O=2),(l===5||l===6)&&(O=3),(l===7||l===8)&&(O=4),(l===9||l===10)&&(O=5),m.height=L[0].height*O}else m.width=f.width||360,m.height=f.height||240;y&&y instanceof HTMLVideoElement&&x(y),L.forEach(function(N,F){x(N,F)}),setTimeout(C,f.frameInterval)}}function x(l,y){if(!v){var L=0,O=0,N=l.width,F=l.height;y===1&&(L=l.width),y===2&&(O=l.height),y===3&&(L=l.width,O=l.height),y===4&&(O=l.height*2),y===5&&(L=l.width,O=l.height*2),y===6&&(O=l.height*3),y===7&&(L=l.width,O=l.height*3),typeof l.stream.left<"u"&&(L=l.stream.left),typeof l.stream.top<"u"&&(O=l.stream.top),typeof l.stream.width<"u"&&(N=l.stream.width),typeof l.stream.height<"u"&&(F=l.stream.height),b.drawImage(l,L,O,N,F),typeof l.stream.onRender=="function"&&l.stream.onRender(b,L,O,N,F,y)}}function I(){v=!1;var l=j(),y=p();return y&&y.getTracks().filter(function(L){return L.kind==="audio"}).forEach(function(L){l.addTrack(L)}),d.forEach(function(L){L.fullcanvas}),l}function j(){D();var l;"captureStream"in m?l=m.captureStream():"mozCaptureStream"in m?l=m.mozCaptureStream():f.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var y=new _;return l.getTracks().filter(function(L){return L.kind==="video"}).forEach(function(L){y.addTrack(L)}),m.stream=y,y}function p(){M.AudioContextConstructor||(M.AudioContextConstructor=new M.AudioContext),f.audioContext=M.AudioContextConstructor,f.audioSources=[],f.useGainNode===!0&&(f.gainNode=f.audioContext.createGain(),f.gainNode.connect(f.audioContext.destination),f.gainNode.gain.value=0);var l=0;if(d.forEach(function(y){if(y.getTracks().filter(function(O){return O.kind==="audio"}).length){l++;var L=f.audioContext.createMediaStreamSource(y);f.useGainNode===!0&&L.connect(f.gainNode),f.audioSources.push(L)}}),!!l)return f.audioDestination=f.audioContext.createMediaStreamDestination(),f.audioSources.forEach(function(y){y.connect(f.audioDestination)}),f.audioDestination.stream}function T(l){var y=document.createElement("video");return A(l,y),y.className=n,y.muted=!0,y.volume=0,y.width=l.width||f.width||360,y.height=l.height||f.height||240,y.play(),y}this.appendStreams=function(l){if(!l)throw"First parameter is required.";l instanceof Array||(l=[l]),l.forEach(function(y){var L=new _;if(y.getTracks().filter(function(F){return F.kind==="video"}).length){var O=T(y);O.stream=y,g.push(O),L.addTrack(y.getTracks().filter(function(F){return F.kind==="video"})[0])}if(y.getTracks().filter(function(F){return F.kind==="audio"}).length){var N=f.audioContext.createMediaStreamSource(y);f.audioDestination=f.audioContext.createMediaStreamDestination(),N.connect(f.audioDestination),L.addTrack(f.audioDestination.stream.getTracks().filter(function(F){return F.kind==="audio"})[0])}d.push(L)})},this.releaseStreams=function(){g=[],v=!0,f.gainNode&&(f.gainNode.disconnect(),f.gainNode=null),f.audioSources.length&&(f.audioSources.forEach(function(l){l.disconnect()}),f.audioSources=[]),f.audioDestination&&(f.audioDestination.disconnect(),f.audioDestination=null),f.audioContext&&f.audioContext.close(),f.audioContext=null,b.clearRect(0,0,m.width,m.height),m.stream&&(m.stream.stop(),m.stream=null)},this.resetVideoStreams=function(l){l&&!(l instanceof Array)&&(l=[l]),D(l)};function D(l){g=[],l=l||d,l.forEach(function(y){if(y.getTracks().filter(function(O){return O.kind==="video"}).length){var L=T(y);L.stream=y,g.push(L)}})}this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=I}typeof t>"u"&&(e.exports=Mr);/**
 * MultiStreamRecorder can record multiple videos in single container.
 * @summary Multi-videos recorder.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef MultiStreamRecorder
 * @class
 * @example
 * var options = {
 *     mimeType: 'video/webm'
 * }
 * var recorder = new MultiStreamRecorder(ArrayOfMediaStreams, options);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 *
 *     // or
 *     var blob = recorder.blob;
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStreams} mediaStreams - Array of MediaStreams.
 * @param {object} config - {disableLogs:true, frameInterval: 1, mimeType: "video/webm"}
 */function Er(d,n){d=d||[];var u=this,g,v;n=n||{elementClass:"multi-streams-mixer",mimeType:"video/webm",video:{width:360,height:240}},n.frameInterval||(n.frameInterval=10),n.video||(n.video={}),n.video.width||(n.video.width=360),n.video.height||(n.video.height=240),this.record=function(){g=new Mr(d,n.elementClass||"multi-streams-mixer"),m().length&&(g.frameInterval=n.frameInterval||10,g.width=n.video.width||360,g.height=n.video.height||240,g.startDrawingFrames()),n.previewStream&&typeof n.previewStream=="function"&&n.previewStream(g.getMixedStream()),v=new ne(g.getMixedStream(),n),v.record()};function m(){var b=[];return d.forEach(function(f){U(f,"video").forEach(function(S){b.push(S)})}),b}this.stop=function(b){v&&v.stop(function(f){u.blob=f,b(f),u.clearRecordedData()})},this.pause=function(){v&&v.pause()},this.resume=function(){v&&v.resume()},this.clearRecordedData=function(){v&&(v.clearRecordedData(),v=null),g&&(g.releaseStreams(),g=null)},this.addStreams=function(b){if(!b)throw"First parameter is required.";b instanceof Array||(b=[b]),d.concat(b),!(!v||!g)&&(g.appendStreams(b),n.previewStream&&typeof n.previewStream=="function"&&n.previewStream(g.getMixedStream()))},this.resetVideoStreams=function(b){g&&(b&&!(b instanceof Array)&&(b=[b]),g.resetVideoStreams(b))},this.getMixer=function(){return g},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}typeof t<"u"&&(t.MultiStreamRecorder=Er);/**
 * RecordRTCPromisesHandler adds promises support in {@link RecordRTC}. Try a {@link https://github.com/muaz-khan/RecordRTC/blob/master/simple-demos/RecordRTCPromisesHandler.html|demo here}
 * @summary Promises for {@link RecordRTC}
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTCPromisesHandler
 * @class
 * @example
 * var recorder = new RecordRTCPromisesHandler(mediaStream, options);
 * recorder.startRecording()
 *         .then(successCB)
 *         .catch(errorCB);
 * // Note: You can access all RecordRTC API using "recorder.recordRTC" e.g. 
 * recorder.recordRTC.onStateChanged = function(state) {};
 * recorder.recordRTC.setRecordingDuration(5000);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.
 * @param {object} config - {type:"video", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}
 * @throws Will throw an error if "new" keyword is not used to initiate "RecordRTCPromisesHandler". Also throws error if first argument "MediaStream" is missing.
 * @requires {@link RecordRTC}
 */function ui(d,n){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if(typeof d>"u")throw'First argument "MediaStream" is required.';var u=this;u.recordRTC=new t(d,n),this.startRecording=function(){return new Promise(function(g,v){try{u.recordRTC.startRecording(),g()}catch(m){v(m)}})},this.stopRecording=function(){return new Promise(function(g,v){try{u.recordRTC.stopRecording(function(m){if(u.blob=u.recordRTC.getBlob(),!u.blob||!u.blob.size){v("Empty blob.",u.blob);return}g(m)})}catch(m){v(m)}})},this.pauseRecording=function(){return new Promise(function(g,v){try{u.recordRTC.pauseRecording(),g()}catch(m){v(m)}})},this.resumeRecording=function(){return new Promise(function(g,v){try{u.recordRTC.resumeRecording(),g()}catch(m){v(m)}})},this.getDataURL=function(g){return new Promise(function(v,m){try{u.recordRTC.getDataURL(function(b){v(b)})}catch(b){m(b)}})},this.getBlob=function(){return new Promise(function(g,v){try{g(u.recordRTC.getBlob())}catch(m){v(m)}})},this.getInternalRecorder=function(){return new Promise(function(g,v){try{g(u.recordRTC.getInternalRecorder())}catch(m){v(m)}})},this.reset=function(){return new Promise(function(g,v){try{g(u.recordRTC.reset())}catch(m){v(m)}})},this.destroy=function(){return new Promise(function(g,v){try{g(u.recordRTC.destroy())}catch(m){v(m)}})},this.getState=function(){return new Promise(function(g,v){try{g(u.recordRTC.getState())}catch(m){v(m)}})},this.blob=null,this.version="5.6.2"}typeof t<"u"&&(t.RecordRTCPromisesHandler=ui);/**
 * WebAssemblyRecorder lets you create webm videos in JavaScript via WebAssembly. The library consumes raw RGBA32 buffers (4 bytes per pixel) and turns them into a webm video with the given framerate and quality. This makes it compatible out-of-the-box with ImageData from a CANVAS. With realtime mode you can also use webm-wasm for streaming webm videos.
 * @summary Video recording feature in Chrome, Firefox and maybe Edge.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef WebAssemblyRecorder
 * @class
 * @example
 * var recorder = new WebAssemblyRecorder(mediaStream);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {webAssemblyPath:'webm-wasm.wasm',workerPath: 'webm-worker.js', frameRate: 30, width: 1920, height: 1080, bitrate: 1024, realtime: true}
 */function Ge(d,n){(typeof ReadableStream>"u"||typeof WritableStream>"u")&&console.error("Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js"),n=n||{},n.width=n.width||640,n.height=n.height||480,n.frameRate=n.frameRate||30,n.bitrate=n.bitrate||1200,n.realtime=n.realtime||!0;var u;function g(){return new ReadableStream({start:function(E){var _=document.createElement("canvas"),M=document.createElement("video"),A=!0;M.srcObject=d,M.muted=!0,M.height=n.height,M.width=n.width,M.volume=0,M.onplaying=function(){_.width=n.width,_.height=n.height;var C=_.getContext("2d"),x=1e3/n.frameRate,I=setInterval(function(){if(u&&(clearInterval(I),E.close()),A&&(A=!1,n.onVideoProcessStarted&&n.onVideoProcessStarted()),C.drawImage(M,0,0),E._controlledReadableStream.state!=="closed")try{E.enqueue(C.getImageData(0,0,n.width,n.height))}catch{}},x)},M.play()}})}var v;function m(E,_){if(!n.workerPath&&!_){u=!1,fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then(function(A){A.arrayBuffer().then(function(C){m(E,C)})});return}if(!n.workerPath&&_ instanceof ArrayBuffer){var M=new Blob([_],{type:"text/javascript"});n.workerPath=R.createObjectURL(M)}n.workerPath||console.error("workerPath parameter is missing."),v=new Worker(n.workerPath),v.postMessage(n.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),v.addEventListener("message",function(A){A.data==="READY"?(v.postMessage({width:n.width,height:n.height,bitrate:n.bitrate||1200,timebaseDen:n.frameRate||30,realtime:n.realtime}),g().pipeTo(new WritableStream({write:function(C){if(u){console.error("Got image, but recorder is finished!");return}v.postMessage(C.data.buffer,[C.data.buffer])}}))):A.data&&(b||S.push(A.data))})}this.record=function(){S=[],b=!1,this.blob=null,m(d),typeof n.initCallback=="function"&&n.initCallback()};var b;this.pause=function(){b=!0},this.resume=function(){b=!1};function f(E){if(!v){E&&E();return}v.addEventListener("message",function(_){_.data===null&&(v.terminate(),v=null,E&&E())}),v.postMessage(null)}var S=[];this.stop=function(E){u=!0;var _=this;f(function(){_.blob=new Blob(S,{type:"video/webm"}),E(_.blob)})},this.name="WebAssemblyRecorder",this.toString=function(){return this.name},this.clearRecordedData=function(){S=[],b=!1,this.blob=null},this.blob=null}typeof t<"u"&&(t.WebAssemblyRecorder=Ge)}(Nt)),Nt.exports}var Ma=Ta();const Ea=Ca(Ma),La=async e=>{const t=await or("./templates/group-entry.html");return(await Promise.all(Object.entries(e).map(async([i,o])=>{const a=oi(o),s=await Promise.all(a.map(ka));return t.replace("{{date}}",i).replace("{{entries}}",s.join(""))}))).join("")},or=async e=>(await fetch(e)).text(),ka=async e=>{let t=await or("./templates/log-entry.html");const r=await or("./templates/emotion.html"),i=new Date(e.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),o=e.emotions.map(c=>r.replace("{{emoji}}",Oa(c.emotion)).replace("{{emotion}}",c.emotion).replace("{{score}}",c.score!==void 0?c.score.toFixed(2):"N/A")).join(""),a=e.sentiment&&typeof e.sentiment=="object"?e.sentiment.sentiment:e.sentiment||"N/A";let s="gray";return a==="negative"?s="red":a==="positive"&&(s="green"),t=t.replace("{{time}}",i).replace("{{transcription}}",e.transcription).replace(/--borderColor--/g,s).replace("{{sentimentText}}",a).replace("{{emotions}}",o),t},Oa=e=>({admiration:"",amusement:"",anger:"",annoyance:"",approval:"",caring:"",confusion:"",curiosity:"",desire:"",disappointment:"",disapproval:"",disgust:"",embarrassment:"",excitement:"",fear:"",gratitude:"",grief:"",joy:"",love:"",nervousness:"",optimism:"",pride:"",realization:"",relief:"",remorse:"",sadness:"",surprise:"",neutral:""})[e]||"",Da=(e,t,r,i=null)=>{switch(t){case"save":{const o=JSON.parse(localStorage.getItem(r))||[],a=Array.isArray(o)?[...o,i]:[i];localStorage.setItem(r,JSON.stringify(a)),e.logMessage(`Saved to local storage: ${r}`);break}case"get":{const o=localStorage.getItem(r);return e.logMessage(`Retrieved from local storage: ${r}`),o?JSON.parse(o):null}case"clear":{localStorage.removeItem(r),e.logMessage(`Cleared local storage: ${r}`);break}default:e.logMessage("Invalid action for local storage handler.")}},Ia=async e=>{const t=Pa();if(!Array.isArray(t)||t.length===0){e.messageLog="No transcription data found.";return}const r=oi(t),i=Ba(r);e.historyLog=await La(i)},Pa=()=>{const e=localStorage.getItem("transcriptionData");return e?JSON.parse(e):[]},oi=e=>e.sort((t,r)=>new Date(r.date)-new Date(t.date)),Ba=e=>e.reduce((t,r)=>{const i=new Date(r.date).toLocaleDateString();return t[i]||(t[i]=[]),t[i].push(r),t},{});async function Fa(e){e.logMessage("Ping: /api/hello",!0,!0);try{const i=`${(await(await fetch("/api/hello")).json()).hello||"No data available"}`;e.logMessage(`Pong: ${i}`),e.echoMessage(i)}catch(t){const r=`Error fetching data: ${t.message}`;e.logMessage(r)}}async function ja(e){try{e.logMessage("Ping: /api/random-text",!0);const r=await(await fetch("/api/random-text")).json();e.textToAnalyze=r.text||"No text available",e.logMessage(`Pong: ${e.textToAnalyze}`)}catch(t){const r=`Error fetching text: ${t.message}`;e.logMessage(r)}}async function Ua(e){try{e.logMessage("Ping: /api/prompt");const i=(await(await fetch("/api/prompt")).json()).prompt||"No prompt available";localStorage.setItem("defaultPrompt",i),localStorage.getItem("userPrompt")||localStorage.setItem("userPrompt",i),e.userPrompt=localStorage.getItem("userPrompt"),e.logMessage(`Pong: ${e.userPrompt}`)}catch(t){e.logMessage(`Error fetching prompt: ${t.message}`)}}localStorage.getItem("openAIKey");const $t=localStorage.getItem("huggingFaceKey");async function ai(e){if(!e.textToAnalyze){e.logMessage("No text available to analyze.");return}try{const{emotions:t,sentiment:r,feedback:i}=await $a(e,e.textToAnalyze);za(e,t,r,i)}catch(t){e.logMessage(`Error connecting to the server: ${t.message}`)}}async function Na(e){await ja(e),await ai(e)}async function $a(e,t){var P,B,W,G;e.logMessage("Ping: /api/analyze",!0);const r=await fetch("/api/analyze",{method:"POST",headers:{"Content-Type":"application/json",huggingFaceKey:$t},body:JSON.stringify({transcription:t})});if(!r.ok)throw new Error(`Emotion API error: ${r.statusText}`);const i=await r.json();e.logMessage("Ping: /api/sentiment",!0);const o=await fetch("/api/sentiment",{method:"POST",headers:{"Content-Type":"application/json",huggingFaceKey:$t},body:JSON.stringify({transcription:t})});if(!o.ok)throw new Error(`Sentiment API error: ${o.statusText}`);const a=await o.json(),s=(((P=i.emotions)==null?void 0:P.significantEmotions)||[]).map(({emotion:de,score:k})=>`${de} ${k.toFixed(2)}`).join(", "),c=`${(B=a.sentiment)==null?void 0:B.sentiment} ${(W=a.sentiment)==null?void 0:W.score.toFixed(2)}`,h=localStorage.getItem("userPrompt")!==localStorage.getItem("defaultPrompt")?localStorage.getItem("userPrompt"):null;e.logMessage("Ping: /api/feedback");const w=await fetch("/api/feedback",{method:"POST",headers:{"Content-Type":"application/json",huggingFaceKey:$t},body:JSON.stringify({transcription:t,emotions:s,sentiment:c,customPrompt:h})});if(!w.ok)throw new Error(`Feedback API error: ${w.statusText}`);const R=await w.json();return{emotions:((G=i.emotions)==null?void 0:G.significantEmotions)||[],sentiment:a.sentiment||{},feedback:R.feedback||""}}function za(e,t,r,i){t.length===0&&e.logMessage("No significant emotions detected.");const o=t.map(h=>h.emotion).join(", "),a=Object.entries(r).map(([h,w])=>typeof w=="number"?`${h} (${w.toFixed(2)})`:`${h} (${w})`).join(", "),s=i||"No feedback available.";e.logMessage(`Pong: ${o}`),e.logMessage(`Pong: ${a}`),e.logMessage(`Pong: ${s}`),e.echoMessage(`${e.textToAnalyze} <em>${o}</em> [${a}]<br><strong>Feedback:</strong> ${s}`);const c={transcription:e.textToAnalyze,emotions:t.map(h=>({emotion:h.emotion,score:h.score})),sentiment:r,feedback:s,date:new Date().toISOString()};Da(e,"save","transcriptionData",c),e.textToAnalyze=""}localStorage.getItem("openAIKey");const Wa=localStorage.getItem("huggingFaceKey");async function Ka(e){e.isRecording?await Va(e):await qa(e)}async function qa(e){try{const t=await navigator.mediaDevices.getUserMedia({audio:!0});e.recorder=new Ea(t,{type:"audio",disableLogs:!0}),e.recorder.startRecording(),e.isRecording=!0,e.logMessage("Recording started.",!0,!0)}catch(t){console.error("Error accessing microphone:",t)}}async function Va(e){e.recorder&&e.recorder.stopRecording(async()=>{const t=e.recorder.getBlob();e.isRecording=!1,e.logMessage("Recording stopped."),await Ga(e,t)})}async function Ga(e,t){const r=new FormData;r.append("file",t,"audio.webm");try{e.logMessage("Ping: /api/transcribe",!0);const i=await fetch("/api/transcribe",{method:"POST",headers:{huggingFaceKey:Wa},body:r});if(!i.ok){console.error("Failed to send file:",i.statusText),e.logMessage(`Server error: ${i.statusText}`);return}const o=await i.json();e.textToAnalyze=o.transcription,e.logMessage(`Pong: ${e.textToAnalyze} (${o.fileSize}, ${o.fileType})`),ai(e)}catch(i){e.logMessage(`Error connecting to the server: ${i.message}`)}}function si(e,t,r=!1){r?e.messageLog=`${t}<br>`:e.messageLog+=`${t}<br>`}function Ha(e,t,r=!1,i=!1){e.debug&&(console.log(t),r&&si(e,t,i))}function Ja(e){e.userPrompt=localStorage.getItem("defaultPrompt"),localStorage.setItem("userPrompt",e.userPrompt)}window.Alpine=Tr;document.addEventListener("alpine:init",()=>{Tr.data("app",()=>({isRecording:!1,messageLog:"",historyLog:"",textToAnalyze:"",recorder:null,openAIKey:localStorage.getItem("openAIKey")||"",huggingFaceKey:localStorage.getItem("huggingFaceKey")||"",userPrompt:localStorage.getItem("userPrompt")||"",debug:localStorage.getItem("debugMode")==="true",saveSettings(){localStorage.setItem("openAIKey",this.openAIKey),localStorage.setItem("huggingFaceKey",this.huggingFaceKey),localStorage.setItem("userPrompt",this.userPrompt),localStorage.setItem("debugMode",this.debug),location.reload()},async init(){this.logMessage("Initializing app..."),this.userPrompt||await this.fetchPrompt()},async startStopRecording(){await Ka(this)},async hello(){await Fa(this)},async fetchPrompt(){await Ua(this)},restorePrompt(){Ja(this)},async analyzeRandomText(){await Na(this)},async loadLocalStorageEntries(){await Ia(this)},logMessage(e,t,r){Ha(this,e,t,r)},echoMessage(e,t){si(this,e,t)}}))});Tr.start();
